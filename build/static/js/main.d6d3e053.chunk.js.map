{"version":3,"sources":["images/logo_google.png","images/pexels-johannes-plenio-1103970.jpg","components/Type/Type.tsx","components/AuthFrame/AuthFrame.tsx","views/Login/LoginView.tsx","classes/Auth.ts","config.ts","utils/Result/Result.ts","utils/Result/PromiseToResult.ts","utils/Result/Try.ts","services/Service.ts","services/AuthService.ts","models/auth.model.ts","classes/MoneyAmount.ts","classes/Transaction.ts","services/TransactionService.ts","utils/groupByDate/groupByDate.ts","utils/compareDate/compareDate.ts","models/transactions.filtered.model.ts","models/transactions.model.ts","constants.ts","store.ts","models/interval.model.ts","models/filters.model.ts","hooks/useRedirect.ts","views/Login/LoginController.tsx","views/Register/RegisterView.tsx","views/Register/RegisterController.tsx","components/ProtectedRoute/ProtectedRoute.tsx","components/TransactionListing/TransactionListingView.tsx","components/TransactionListing/TransactionListing.tsx","components/TransactionList/TransactionListView.tsx","components/TransactionList/TransactionListController.tsx","components/PageHeader/PageHeader.tsx","components/MoneyType/MoneyType.tsx","hooks/useMedia.ts","components/FiltersForm/FiltersFormView.tsx","components/FiltersForm/FiltersFormController.tsx","components/IntervalPickerForm/IntervalPickerFormView.tsx","components/IntervalPickerForm/IntervalPickerFormController.tsx","components/FiltersPanel/FiltersPanelView.tsx","components/FiltersPanel/FiltersPanelController.tsx","views/Dashboard/DashboardView.tsx","views/Dashboard/DashboardController.tsx","utils/readFileAsText/readFileAsText.ts","utils/xlsx/xlsx.ts","views/Settings/SettingsView.tsx","views/Settings/SettingsController.tsx","views/Analytics/AnalyticsView.tsx","views/Analytics/AnalyticsController.tsx","views/ForgotPassword/ForgotPasswordView.tsx","views/ForgotPassword/ForgotPasswordController.tsx","components/TransactionForm/TransactionFormView.tsx","components/TransactionForm/TransactionFormController.tsx","views/Sidebar/SidebarView.tsx","views/Sidebar/SidebarController.tsx","views/AppFrame/AppFrameView.tsx","views/AppFrame/AppFrameController.tsx","views/ChangePassword/ChangePasswordView.tsx","views/ChangePassword/ChangePasswordController.tsx","views/ConfirmEmail/ConfirmEmailView.tsx","views/ConfirmEmail/ConfirmEmailController.tsx","Routes.tsx","App.tsx","serviceWorker.ts","styles/theme.ts","index.tsx"],"names":["module","exports","Type","props","condensed","className","color","typographyProps","Typography","cx","String","AuthFrame","variant","component","header","body","footer","Divider","LoginView","useState","passwordVisible","setPasswordVisible","useForm","resolver","yupResolver","loginValidationSchema","register","handleSubmit","errors","formState","emailError","touched","email","message","passwordError","password","noValidate","onSubmit","TextField","id","name","type","inputRef","label","error","helperText","fullWidth","InputProps","endAdornment","InputAdornment","position","Email","IconButton","onClick","_","size","Button","handleGoogleSubmit","startIcon","src","googleLogo","alt","handleCreateAccount","handleForgotPassword","Auth","json","displayName","photoUrl","googleId","this","undefined","arg","JsonSchema","isValidSync","object","string","required","min","Config","Success","value","fallbackValue","callback","Failure","options","status","code","details","axiosError","response","data","request","codePrefix","description","trim","PromiseToResult","promise","then","resolved","catch","rejected","Try","fn","result","Promise","_result","Service","path","baseURL","token","store","getState","auth","accessToken","payload","jwt","decode","expiresAt","Number","exp","Date","now","console","warn","force","isAccessTokenValid","url","endpoint","axios","get","getActions","_setAccessToken","logout","attemptRefreshAccessToken","override","headers","Authorization","config","requestFunction","onBeforeRequest","getConfig","a","isSuccess","AxiosError","handleRequest","post","delete","put","patch","API_URL","Axios","create","withCredentials","AuthService","isFailure","isJson","InvalidResponse","credentials","Empty","window","location","href","authModel","initialized","_setInitialized","action","state","boolean","user","isLoggedIn","computed","Boolean","newAccessToken","_login","_logout","getProfile","thunk","actions","profileResult","onSuccess","profile","loginWithGoogle","loginWithEmailPassword","loginWithEmailAndPassword","registerWithEmailPassword","registerWithEmailAndPassword","forgotPassword","validateChangePasswordToken","validatePasswordChangeToken","changePassword","confirmEmail","requestConfirmationEmail","MoneyAmount","cents","_value","Math","trunc","Error","decimalValue","toLocaleString","style","currency","that","floor","abs","values","reduce","sum","add","Transaction","date","category","comment","amount","uid","time","integerAmount","uuid","getTime","validateSync","Array","isArray","every","number","positive","integer","TransactionService","isJsonArray","groupByDate","items","getDate","itemsByKey","res","item","key","datefns","getKey","Object","entries","map","entry","sort","b","compareDate","op","_a","serializeDate","_b","getFullYear","getMonth","filteredTransactionsModel","storeState","transactions","interval","startDate","endDate","filters","searchTerm","minAmount","maxAmount","excludedCategories","filter","includes","format","toLowerCase","itemsByDates","filtered","count","length","sums","incomes","isPositive","expenses","isNegative","all","transactionsModel","categories","c","i","indexOf","minimumAmount","next","maximumAmount","max","getTransactions","_getTransactions","jsons","postTransaction","_postTransaction","push","deleteTransaction","_deleteTransaction","putTransaction","_putTransaction","patchTransaction","_patchTransaction","onAuthChanged","thunkOn","target","resolvedTargets","loggedOut","loggedIn","_clearTransactions","MINIMUM_DATE","MAXIMUM_DATE","storeModel","setStartDate","setEndDate","setInterval","dates","nextInterval","isAll","newStartDate","isYear","isMonth","isWeek","weekStartsOn","previousInterval","newEndDate","dayInterval","weekInterval","monthInterval","yearInterval","allInterval","today","isDay","includesToday","smartDisplayString","displayString","NEGATIVE_INFINITY","POSITIVE_INFINITY","resetAll","setSearchTerm","resetSearchTerm","setAmount","resetAmount","excludeCategory","includeCategory","resetExcludedCategories","createStore","typedHooks","createTypedHooks","useStoreActions","useStoreState","useStoreDispatch","useStore","useRedirect","history","useHistory","routes","yup","defined","Login","setError","redirect","dashboard","onFailure","failure","useEffect","RegisterView","form","registerValidationSchema","registered","handleLogin","Register","setRegistered","log","login","ProtectedRoute","fallbackRoute","routeProps","defaultFallbackRoute","to","TransactionListingView","signClass","transaction","TransactionListing","handleDelete","useCallback","TransactionListView","virtualizedListRef","createRef","current","recomputeRowHeights","autoSizer","ref","height","width","rowCount","rowHeight","index","noRowsRenderer","rowRenderer","rowProps","currentYear","TransactionList","filteredItemsByDates","bypassFilters","PageHeader","textureImg","children","MoneyType","typeProps","useMedia","query","mediaQueryList","useMemo","matchMedia","setValue","changeHandler","matches","addEventListener","removeEventListener","FiltersFormView","onResetAll","onChange","e","onResetSearchTerm","Clear","onResetAmount","minPossibleAmount","maxPossibleAmount","ceil","Slider","step","marks","valueLabelDisplay","onResetExcludedCategories","excluded","Chip","onConfirm","FiltersForm","IntervalPickerFormView","intervalString","disabled","onPrevious","ChevronLeft","onNow","onNext","ChevronRight","onDay","onWeek","onMonth","onYear","onAll","DatePicker","d","inputVariant","IntervalPickerForm","toDay","toWeek","toMonth","toYear","toAll","previous","FiltersPanelView","filtersFormDrawerOpen","setFiltersFormDrawerOpen","intervalPickerMenuAnchor","setIntervalPickerMenuAnchor","mediumScreen","largeScreen","Drawer","open","onClose","anchor","Menu","anchorEl","currentTarget","endIcon","FiltersPanel","DashboardView","filteredSum","Dashboard","filteredSums","filteredIncomesSum","filteredExpensesSum","readFileAsText","fileInputElement","resolve","file","files","reader","FileReader","onerror","onabort","onload","event","readAsText","raw","workbook","XLSX","read","Unimplemented","Unknown","SettingsView","handleLogout","readFileAsJsonTransactions","Settings","AnalyticsView","accept","rows","toString","split","row","replace","reverse","padStart","join","Analytics","ForgotPasswordView","forgotPasswordValidationSchema","success","ForgotPassword","setSuccess","TransactionFormView","preventDefault","onAmountChange","Autocomplete","v","onCategoryChange","freeSolo","openOnFocus","autoHighlight","selectOnFocus","disableClearable","renderInput","params","onTimeChange","onCommentChange","TransactionForm","setCategory","setTime","setComment","amountError","setAmountError","categoryError","setCategoryError","timeError","setTimeError","commentError","setCommentError","validateForm","amountValidationError","test","validateAmount","categoryValidationError","valid","empty","validateCategory","timeValidationError","isNaN","validateTime","validateComment","_root","main","SidebarView","sidebarView","transactionFormOpen","onTransactionFormClose","active","isDashboard","onDashboard","isAnalytics","onAnalytics","isBudget","onBudget","isSettings","onSettings","onTransactionFormOpen","Sidebar","dashboardMatch","useRouteMatch","analyticsMatch","analytics","budgetMatch","budget","settingsMatch","settings","setTransactionFormOpen","AppFrameView","AppFrame","ChangePasswordView","changePasswordValidationSchema","loading","CircularProgress","validTokenEmail","passwordChangeSuccessful","onLogin","ChangePassword","useParams","setValidTokenEmail","setPasswordChangeSuccessful","ConfirmEmailView","ConfirmEmail","approot","Routes","exact","App","hostname","match","cssvar","getComputedStyle","document","documentElement","getPropertyValue","theme","createMuiTheme","palette","primary","colors","deepPurple","dark","light","50","100","200","300","400","500","600","700","800","900","contrastText","ReactDOM","render","StrictMode","ThemeProvider","utils","DateFnsUtils","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d6d3e053.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo_google.696b80ec.png\";","module.exports = __webpack_public_path__ + \"static/media/pexels-johannes-plenio-1103970.afe78909.jpg\";","import \"./Type.scss\";\r\nimport React, { ElementType } from \"react\"\r\nimport cx from \"classnames\"\r\nimport { Typography, TypographyProps } from \"@material-ui/core\";\r\n\r\nexport type TypeProps = Omit<TypographyProps, \"color\"> & {\r\n\tcomponent?: ElementType;\r\n\tcolor?: TypographyProps[\"color\"] | \"white\" | \"black\"\r\n\tcondensed?: boolean;\r\n}\r\n\r\nexport function Type(props: TypeProps) {\r\n\r\n\tconst { condensed, className, color, ...typographyProps } = props\r\n\r\n\treturn <Typography\r\n\r\n\t\t{...typographyProps}\r\n\r\n\t\tcolor={(() => {\r\n\t\t\tswitch (color) {\r\n\t\t\t\tcase \"white\":\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\tcase \"black\":\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn color;\r\n\t\t\t}\r\n\t\t})()}\r\n\r\n\t\tclassName={cx(\r\n\t\t\tclassName,\r\n\t\t\t\"Type\",\r\n\t\t\t{ condensed },\r\n\t\t\t`color-${String(color)}`\r\n\t\t)}\r\n\t/>\r\n}\r\n\r\n","import \"./AuthFrame.scss\";\r\nimport React from \"react\"\r\nimport { Type } from \"../Type/Type\";\r\nimport { Divider } from \"@material-ui/core\";\r\n\r\nexport type AuthFrameProps = {\r\n\theader: string;\r\n\tbody: React.ReactNode;\r\n\tfooter?: React.ReactNode;\r\n}\r\n\r\nexport function AuthFrame(props: AuthFrameProps) {\r\n\treturn <div className=\"AuthFrame\">\r\n\r\n\t\t<div className=\"container\">\r\n\r\n\t\t\t<header>\r\n\r\n\t\t\t\t<Type variant=\"h5\" component=\"h1\" color=\"white\">\r\n\t\t\t\t\t{props.header}\r\n\t\t\t\t</Type>\r\n\r\n\t\t\t</header>\r\n\r\n\t\t\t<div className=\"content\">\r\n\r\n\t\t\t\t{props.body}\r\n\r\n\t\t\t\t{\r\n\r\n\t\t\t\t\tprops.footer\r\n\t\t\t\t\t\t? <>\r\n\r\n\t\t\t\t\t\t\t<Divider />\r\n\r\n\t\t\t\t\t\t\t<footer>\r\n\r\n\t\t\t\t\t\t\t\t{props.footer}\r\n\r\n\t\t\t\t\t\t\t</footer>\r\n\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t: null\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\r\n\t</div>\r\n}","import \"./Login.scss\";\r\nimport React, { useState } from 'react';\r\nimport { useForm } from \"react-hook-form\"\r\nimport { loginValidationSchema, LoginFormType } from './LoginController';\r\nimport { yupResolver } from '@hookform/resolvers';\r\nimport { TextField, Button, InputAdornment, IconButton } from \"@material-ui/core\";\r\nimport googleLogo from \"../../images/logo_google.png\"\r\nimport {\r\n\tEmail as EmailIcon,\r\n\tVisibility as PasswordVisibleIcon,\r\n\tVisibilityOff as PasswordInvisibleIcon,\r\n} from \"@material-ui/icons\";\r\nimport { AuthFrame } from \"../../components/AuthFrame/AuthFrame\";\r\nimport { Type } from \"../../components/Type/Type\";\r\n\r\nexport type LoginViewProps = {\r\n\thandleSubmit(values: LoginFormType): Promise<void>;\r\n\thandleGoogleSubmit(): Promise<void>;\r\n\thandleForgotPassword(): Promise<void>;\r\n\thandleCreateAccount(): Promise<void>;\r\n\terror?: string;\r\n}\r\n\r\nexport const LoginView: React.FC<LoginViewProps> = (props) => {\r\n\r\n\t/**\r\n\t * Password visible state\r\n\t */\r\n\tconst [passwordVisible, setPasswordVisible] = useState(false)\r\n\r\n\t/**\r\n\t * React hook form\r\n\t */\r\n\tconst { register, handleSubmit, errors, formState, ...form } = useForm<LoginFormType>({\r\n\t\tresolver: yupResolver(loginValidationSchema),\r\n\t})\r\n\r\n\t/**\r\n\t * Email and password error shorthands for react hook form\r\n\t */\r\n\tconst emailError = formState.touched.email && errors.email?.message\r\n\tconst passwordError = formState.touched.password && errors.password?.message\r\n\r\n\treturn <div className=\"Login\">\r\n\t\t<AuthFrame\r\n\r\n\t\t\theader=\"Login to Expence\"\r\n\r\n\t\t\tbody={\r\n\t\t\t\t<form noValidate onSubmit={handleSubmit(props.handleSubmit)}>\r\n\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tid=\"login-email\"\r\n\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\t\tlabel=\"Email\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\terror={!!emailError}\r\n\t\t\t\t\t\thelperText={emailError}\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t<EmailIcon />\r\n\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tid=\"login-password\"\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\ttype={passwordVisible ? \"text\" : \"password\"}\r\n\t\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\terror={!!passwordError}\r\n\t\t\t\t\t\thelperText={passwordError}\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t<IconButton onClick={() => setPasswordVisible(_ => !_)} size=\"small\">\r\n\t\t\t\t\t\t\t\t\t{passwordVisible ? <PasswordVisibleIcon /> : <PasswordInvisibleIcon />}\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t</InputAdornment>,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{\"Login\"}\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.error\r\n\t\t\t\t\t\t\t? <Type color=\"error\">\r\n\t\t\t\t\t\t\t\t{props.error}\r\n\t\t\t\t\t\t\t</Type>\r\n\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\tonClick={() => props.handleGoogleSubmit()}\r\n\t\t\t\t\t\tstartIcon={<img className=\"logo\" src={googleLogo} alt=\"Google Logo\" />}\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{\"Log in with Google\"}\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t</form>\r\n\t\t\t}\r\n\r\n\t\t\tfooter={<div className=\"footerContent\">\r\n\r\n\t\t\t\t<Button onClick={() => props.handleCreateAccount()}>\r\n\t\t\t\t\t{\"Create account\"}\r\n\t\t\t\t</Button>\r\n\r\n\t\t\t\t<Button onClick={() => props.handleForgotPassword()}>\r\n\t\t\t\t\t{\"Forgot password\"}\r\n\t\t\t\t</Button>\r\n\r\n\t\t\t</div>}\r\n\t\t/>\r\n\t</div>\r\n}\r\n","import { object, string, ObjectSchema } from \"yup\";\r\n\r\nexport type JsonAuth = {\r\n  id: string;\r\n  displayName: string | undefined;\r\n  photoUrl: string | undefined;\r\n  email: string | undefined;\r\n  googleId: string | undefined;\r\n};\r\n\r\nexport class Auth {\r\n  id: string;\r\n  displayName?: string;\r\n  email?: string;\r\n  photoUrl?: string;\r\n  googleId?: string;\r\n\r\n  constructor(json: JsonAuth) {\r\n    this.id = json.id;\r\n    this.displayName = json.displayName ?? undefined;\r\n    this.email = json.email ?? undefined;\r\n    this.photoUrl = json.photoUrl ?? undefined;\r\n    this.googleId = json.googleId ?? undefined;\r\n  }\r\n\r\n  /**\r\n   * JsonSchema defining shape of JsonAuth for yup validatioin\r\n   */\r\n  static JsonSchema: ObjectSchema<JsonAuth> = object({\r\n    id: string().required().min(1),\r\n    displayName: string(),\r\n    photoUrl: string(),\r\n    email: string(),\r\n    googleId: string(),\r\n  }).required();\r\n\r\n  /**\r\n   * Is the value a valid JsonAuth\r\n   */\r\n  static isJson(arg: any): arg is JsonAuth {\r\n    try {\r\n      Auth.JsonSchema.isValidSync(arg);\r\n      return true;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Convert Auth to JsonAuth\r\n   */\r\n  toJson(): JsonAuth {\r\n    return {\r\n      id: this.id,\r\n      displayName: this.displayName,\r\n      email: this.email,\r\n      googleId: this.googleId,\r\n      photoUrl: this.photoUrl,\r\n    };\r\n  }\r\n}\r\n","export class Config {\r\n  static get API_URL() {\r\n    const env = process.env.NODE_ENV;\r\n    if (!env || env === \"development\") {\r\n      return \"http://localhost:4000\";\r\n    } else if (env === \"test\") {\r\n      return \"http://localhost:4001\";\r\n    } else {\r\n      return \"https://expenceapp.herokuapp.com\";\r\n    }\r\n  }\r\n}\r\n","import { AxiosError, AxiosResponse } from \"axios\";\r\n\r\nexport type Result<T = undefined, E = undefined> =\r\n  | Success<T, E>\r\n  | Failure<T, E>;\r\n\r\ninterface IResult<T = undefined, E = undefined> {\r\n  /**\r\n   * The current value, either the success or failure value\r\n   */\r\n  value: T | E;\r\n\r\n  /**\r\n   * Currently stored value, whether it is the success value or failure value\r\n   */\r\n  getOr(fallbackValue: T): T;\r\n\r\n  /**\r\n   * Check if this ``Result`` is a success\r\n   */\r\n  isSuccess(): this is Success<T, E>;\r\n\r\n  /**\r\n   * Check if this ``Result`` is a failure\r\n   */\r\n  isFailure(): this is Failure<T, E>;\r\n\r\n  /**\r\n   * If the ``Result`` succeeds, the provided callback function is ran with the\r\n   * success value. This is an alternative to saying\r\n   *\r\n   * ```\r\n   * if (result.isSuccess()) {\r\n   *   callback(result.value)\r\n   * }\r\n   * ```\r\n   */\r\n  onSuccess(callback: (value: T) => void): this;\r\n\r\n  /**\r\n   * If the ``Result`` fails, the provided callback function is ran with the\r\n   * failure value. This is an alternative to saying\r\n   *\r\n   * ```\r\n   * if (result.isFailure()) {\r\n   *   callback(result.value)\r\n   * }\r\n   * ```\r\n   */\r\n  onFailure(callback: (value: Failure<T, E>) => void): this;\r\n}\r\n\r\n/**\r\n * Success implementation\r\n */\r\nexport class Success<T = undefined, E = undefined> implements IResult<T, E> {\r\n  value: T;\r\n\r\n  constructor(value: T) {\r\n    this.value = value;\r\n  }\r\n\r\n  getOr(fallbackValue: T): T {\r\n    return this.value;\r\n  }\r\n\r\n  isSuccess(): this is Success<T, E> {\r\n    return true;\r\n  }\r\n\r\n  isFailure(): this is Failure<T, E> {\r\n    return false;\r\n  }\r\n\r\n  onSuccess(callback: (value: T) => void): this {\r\n    callback(this.value);\r\n    return this;\r\n  }\r\n\r\n  onFailure(callback: (value: Failure<T, E>) => void): this {\r\n    return this;\r\n  }\r\n\r\n  static From<R = any, U = any>(value: U) {\r\n    return new Success<U, R>(value);\r\n  }\r\n\r\n  static Empty<R = any>() {\r\n    return new Success<undefined, R>(undefined);\r\n  }\r\n}\r\n\r\n/**\r\n * Failure implementation\r\n */\r\nexport class Failure<T = undefined, E = undefined> implements IResult<T, E> {\r\n  /**\r\n   * Detailed information on the failure: Failure message.\r\n   *\r\n   * More human readable message for displaying to the user or\r\n   * for debugging purposes.\r\n   */\r\n  message: string;\r\n\r\n  /**\r\n   * Detailed information on the failure: Failure status code.\r\n   *\r\n   * Codes\r\n   * - `0-9` Generic failures and errors\r\n   *   - `0` Unknown failure\r\n   *   - `1` Caught error\r\n   *   - `2` Unimplemented failure\r\n   * - `10-19` Local failure\r\n   *   - `10` Any local failure\r\n   * - `20-29` Local network and service failures\r\n   *   - `21` Network error or could not reach server\r\n   *   - `22` Could not formulate request\r\n   *   - `23` Invalid data received from server\r\n   * - `100 - 599` Reserved for corresponding HTTP codes\r\n   */\r\n  status: number;\r\n\r\n  /**\r\n   * Detailed information on the failure: Failure error code.\r\n   *\r\n   * Code defines a stringified code presenting more information on\r\n   * what caused the failure and where it occured.\r\n   */\r\n  code: string;\r\n\r\n  /**\r\n   * Details is an object which wraps status, code and message into\r\n   * a signle object.\r\n   */\r\n  details: {\r\n    message: string;\r\n    status: number;\r\n    code: string;\r\n  };\r\n\r\n  /**\r\n   * Data if any is given\r\n   */\r\n  value: E;\r\n\r\n  constructor(\r\n    /**\r\n     * Failure value.\r\n     */\r\n    value: E,\r\n\r\n    /**\r\n     * More specific failure options. If not given, will use\r\n     * default failure options.\r\n     */\r\n    options?: {\r\n      /**\r\n       * Detailed information on the failure: Failure message.\r\n       *\r\n       * More human readable message for displaying to the user or\r\n       * for debugging purposes.\r\n       */\r\n\r\n      message?: Failure[\"message\"];\r\n\r\n      /**\r\n       * Detailed information on the failure: Failure status code.\r\n       *\r\n       * Codes\r\n       * - `0-9` Generic failures and errors\r\n       *   - `0` Unknown failure\r\n       *   - `1` Caught error\r\n       *   - `2` Unimplemented failure\r\n       * - `10-19` Local failure\r\n       *   - `10` Any local failure\r\n       * - `20-29` Local network and service failures\r\n       *   - `21` Network error or could not reach server\r\n       *   - `22` Could not formulate request\r\n       *   - `23` Invalid data received from server\r\n       * - `100 - 599` Reserved for corresponding HTTP codes\r\n       */\r\n      status?: Failure[\"status\"];\r\n\r\n      /**\r\n       * Detailed information on the failure: Failure error code.\r\n       *\r\n       * Code defines a stringified code presenting more information on\r\n       * what caused the failure and where it occured.\r\n       */\r\n      code?: Failure[\"code\"];\r\n    }\r\n  ) {\r\n    this.details = {\r\n      message: options?.message ?? \"Unknown failure.\",\r\n      status: options?.status ?? 0,\r\n      code: options?.code ?? \"failure/unknown\",\r\n    };\r\n    this.message = this.details.message;\r\n    this.status = this.details.status;\r\n    this.code = this.details.code;\r\n    this.value = value;\r\n  }\r\n\r\n  getOr(fallbackValue: T): T {\r\n    return fallbackValue;\r\n  }\r\n\r\n  onSuccess(callback: (value: T) => void): this {\r\n    return this;\r\n  }\r\n\r\n  onFailure(callback: (value: Failure<T, E>) => void): this {\r\n    callback(this);\r\n    return this;\r\n  }\r\n\r\n  isSuccess(): this is Success<T, E> {\r\n    return false;\r\n  }\r\n\r\n  isFailure(): this is Failure<T, E> {\r\n    return true;\r\n  }\r\n\r\n  // Defining common failure types as static factory methods\r\n\r\n  /**\r\n   * Generate a failure from an Axios error.\r\n   */\r\n  static AxiosError<T = undefined>(\r\n    axiosError: AxiosError\r\n  ): Failure<T, { errors?: object }> {\r\n    if (axiosError.response) {\r\n      const error = axiosError.response.data;\r\n      return new Failure<T, { errors?: object }>(\r\n        error?.errors && typeof error.errors === \"object\"\r\n          ? { errors: error.errors }\r\n          : {},\r\n        {\r\n          status: axiosError.response.status,\r\n          message:\r\n            error?.message && typeof error.message === \"string\"\r\n              ? error.message\r\n              : \"Unknown server error\",\r\n          code:\r\n            error?.code && typeof error.code === \"string\"\r\n              ? error.code\r\n              : \"server/unknown\",\r\n        }\r\n      );\r\n    } else if (axiosError.request) {\r\n      return new Failure<T, { errors?: object }>(\r\n        {},\r\n        {\r\n          status: 21,\r\n          code: \"server/unavailable\",\r\n          message: \"Could not reach server\",\r\n        }\r\n      );\r\n    } else {\r\n      return new Failure<T, { errors?: object }>(\r\n        {},\r\n        {\r\n          status: 22,\r\n          code: \"server/failure-formulating-request\",\r\n          message: \"Could not formulate request to server\",\r\n        }\r\n      );\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Invalid server response Failure\r\n   *\r\n   * This method is purposed for Services\r\n   */\r\n  static InvalidResponse<T = undefined>(\r\n    response: AxiosResponse<any>,\r\n    codePrefix: string = \"failure\",\r\n    description: string = \"\"\r\n  ) {\r\n    return new Failure<T, { errors?: object; response: AxiosResponse<any> }>(\r\n      { response },\r\n      {\r\n        status: 23,\r\n        code: `${codePrefix}/invalid-response`,\r\n        message: `${description} Invalid response from server.`.trim(),\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Unimplemented Failure.\r\n   */\r\n  static Unimplemented<T = undefined>() {\r\n    return new Failure<T, undefined>(undefined, {\r\n      code: \"failure/unimplemented\",\r\n      message: \"Unimplemented feature\",\r\n      status: 2,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Failure from thrown error\r\n   */\r\n  static Error<T = undefined>(error: Error) {\r\n    return new Failure<T, Error>(error, {\r\n      message: error.message,\r\n      code: `error/${error.name}`,\r\n      status: 1,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Unknonw failure\r\n   */\r\n  static Unknown<T = undefined>() {\r\n    return new Failure<T, undefined>(undefined);\r\n  }\r\n}\r\n","import { Failure, Success } from \"./Result\";\r\n\r\nexport function PromiseToResult<T, E = any>(promise: Promise<T>) {\r\n  return promise\r\n    .then((resolved) => new Success<T, E>(resolved))\r\n    .catch((rejected) => new Failure<T, E>(rejected));\r\n}\r\n","import { Success, Failure, Result } from \"./Result\";\r\n\r\n// Synchronous Try overload\r\nexport function Try<T = undefined, E = undefined>(\r\n  fn: () => Success<T, any> | Failure<any, E>\r\n): Result<T, E>;\r\n\r\n// Asynchronous Try overload\r\nexport function Try<T = undefined, E = undefined>(\r\n  fn: () => Promise<Success<T, any> | Failure<any, E>>\r\n): Promise<Result<T, E>>;\r\n\r\n/**\r\n * Running code inside a try function enables returning a `Success`\r\n * or a `Failure` instance, either synchronously or asynchronously\r\n * and the function will handle\r\n */\r\nexport function Try<T = undefined, E = undefined>(\r\n  fn:\r\n    | (() => Success<T, any> | Failure<any, E>)\r\n    | (() => Promise<Success<T, any> | Failure<any, E>>)\r\n): Result<T, E> | Promise<Result<T, E>> {\r\n  const result = fn();\r\n\r\n  if (result instanceof Promise) {\r\n    return result.then((_result) => {\r\n      if (_result instanceof Success) {\r\n        return new Success<T, E>(_result.value);\r\n      } else {\r\n        return new Failure<T, E>(_result.value, _result.details);\r\n      }\r\n    });\r\n  } else {\r\n    if (result instanceof Success) {\r\n      return new Success<T, E>(result.value);\r\n    } else {\r\n      return new Failure<T, E>(result.value, result.details);\r\n    }\r\n  }\r\n}\r\n","import Axios, { AxiosRequestConfig, AxiosError, AxiosResponse } from \"axios\";\r\nimport { Config } from \"../config\";\r\nimport { store } from \"../store\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport { Failure, Result } from \"../utils/Result/Result\";\r\nimport { PromiseToResult } from \"../utils/Result/PromiseToResult\";\r\nimport { Try } from \"../utils/Result/Try\";\r\n\r\nexport class Service {\r\n  /**\r\n   * Base URL for sending requests to the API\r\n   */\r\n  protected static baseURL = `${Config.API_URL}/api`;\r\n\r\n  /**\r\n   * Axios instance to use for sending requests\r\n   */\r\n  protected static axios = Axios.create({\r\n    baseURL: Service.baseURL,\r\n    withCredentials: true,\r\n  });\r\n\r\n  /**\r\n   * Construct endpoint from path, base URL already handled\r\n   */\r\n  protected static endpoint(path: string) {\r\n    return `${Service.baseURL}${path}`;\r\n  }\r\n\r\n  /**\r\n   * Ensure access token is valid\r\n   */\r\n  protected static isAccessTokenValid() {\r\n    const token = store.getState().auth.accessToken;\r\n    if (!token) return false;\r\n    try {\r\n      const payload = jwt.decode(token) as any;\r\n      const expiresAt = Number(payload?.exp || 0) * 1000;\r\n      const expirationBuffer = 5000; // Fetch new access token 30 seconds before expiration\r\n      const tokenIsValid = Date.now() < expiresAt - expirationBuffer;\r\n      return tokenIsValid;\r\n    } catch (error) {\r\n      console.warn(\"Error occured while checking access token\", error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Attempt refresh access token function\r\n   */\r\n  protected static async attemptRefreshAccessToken(force: boolean = false) {\r\n    const accessTokenIsValid = Service.isAccessTokenValid();\r\n    if (!accessTokenIsValid || force) {\r\n      const url = Service.endpoint(\"/auth/refresh_token\");\r\n      try {\r\n        const result = await Service.axios.get<string>(url);\r\n        const accessToken = result.data;\r\n        store.getActions().auth._setAccessToken(accessToken);\r\n      } catch (e) {\r\n        if (store.getState().auth.accessToken) {\r\n          store.getActions().auth.logout();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Before request hook\r\n   */\r\n  protected static async onBeforeRequest() {\r\n    await Service.attemptRefreshAccessToken();\r\n  }\r\n\r\n  /**\r\n   * Gets basic axios config\r\n   */\r\n  protected static getConfig(\r\n    override?: AxiosRequestConfig | undefined\r\n  ): AxiosRequestConfig {\r\n    const accessToken = store.getState().auth.accessToken;\r\n\r\n    // Construct request headers\r\n    const headers = { ...override?.headers };\r\n    if (accessToken) {\r\n      headers.Authorization = `bearer ${accessToken}`;\r\n    }\r\n\r\n    // Override config with headers\r\n    return {\r\n      ...override,\r\n      headers,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Run requests with hooks and error handling\r\n   *\r\n   * @param requestFunction Request creator function\r\n   */\r\n  protected static async handleRequest<T>(\r\n    path: string,\r\n    config: AxiosRequestConfig | undefined,\r\n    requestFunction: (url: string, options: AxiosRequestConfig) => Promise<T>\r\n  ): Promise<Result<T, { errors?: object; response?: AxiosResponse<any> }>> {\r\n    /**\r\n     * Run hooks\r\n     */\r\n    await Service.onBeforeRequest();\r\n\r\n    /**\r\n     * Run request function to promise\r\n     */\r\n    const url = Service.endpoint(path);\r\n    const options = Service.getConfig(config);\r\n    const promise = requestFunction(url, options);\r\n\r\n    return Try(async () => {\r\n      const result = await PromiseToResult(promise);\r\n      if (result.isSuccess()) {\r\n        return result;\r\n      } else {\r\n        return Failure.AxiosError(result.value as AxiosError);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Axios typed GET request wrapper with hooks\r\n   */\r\n  protected static async get<ResponseData = any>(\r\n    path: string,\r\n    config?: AxiosRequestConfig | undefined\r\n  ) {\r\n    return Service.handleRequest(path, config, (url, options) => {\r\n      return Service.axios.get<ResponseData>(url, options);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Axios typed POST request wrapper with hooks\r\n   */\r\n  protected static async post<RequestData = any, ResponseData = any>(\r\n    path: string,\r\n    data?: RequestData,\r\n    config?: AxiosRequestConfig\r\n  ) {\r\n    return Service.handleRequest(path, config, (url, options) => {\r\n      return Service.axios.post<ResponseData>(url, data, options);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Axios typed DELETE request wrapper with hooks\r\n   */\r\n  protected static async delete<ResponseData = any>(\r\n    path: string,\r\n    config?: AxiosRequestConfig | undefined\r\n  ) {\r\n    return Service.handleRequest(path, config, (url, options) => {\r\n      return Service.axios.delete<ResponseData>(url, options);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Axios typed PUT request wrapper with hooks\r\n   */\r\n  protected static async put<RequestData = any, ResponseData = any>(\r\n    path: string,\r\n    data?: RequestData,\r\n    config?: AxiosRequestConfig\r\n  ) {\r\n    return Service.handleRequest(path, config, (url, options) => {\r\n      return Service.axios.put<ResponseData>(url, data, options);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Axios typed PATCH request wrapper with hooks\r\n   */\r\n  protected static async patch<RequestData = any, ResponseData = any>(\r\n    path: string,\r\n    data?: RequestData,\r\n    config?: AxiosRequestConfig\r\n  ) {\r\n    return Service.handleRequest(path, config, (url, options) => {\r\n      return Service.axios.patch<ResponseData>(url, data, options);\r\n    });\r\n  }\r\n}\r\n","import { Service } from \"./Service\";\r\nimport { Failure, Success } from \"../utils/Result/Result\";\r\nimport { Try } from \"../utils/Result/Try\";\r\nimport { Auth } from \"../classes/Auth\";\r\n\r\nexport class AuthService extends Service {\r\n  /**\r\n   * Fetches the user's profile if the user is signed in.\r\n   */\r\n  static async getProfile() {\r\n    return Try(async () => {\r\n      const result = await Service.get(\"/auth/profile\");\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (Auth.isJson(result.value)) {\r\n        return new Success(result.value);\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"auth/profile\",\r\n          \"Could not get profile.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Registers and logs in a new user with the given credentials.\r\n   */\r\n  static async registerWithEmailAndPassword(credentials: {\r\n    email: string;\r\n    password: string;\r\n  }) {\r\n    return Try(async () => {\r\n      const result = await Service.post(\"/auth/register\", credentials);\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (result.value.status === 200) {\r\n        return Success.Empty();\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"auth/register\",\r\n          \"Could not register.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Logs the user in with the given credentials.\r\n   */\r\n  static async loginWithEmailAndPassword(credentials: {\r\n    email: string;\r\n    password: string;\r\n  }) {\r\n    return Try(async () => {\r\n      const result = await Service.post(\"/auth/login\", credentials);\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (result.value.status === 200) {\r\n        return Success.Empty();\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"auth/login\",\r\n          \"Could not login.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Sends a forgot password email to the given email address.\r\n   */\r\n  static async forgotPassword(credentials: { email: string }) {\r\n    return Try(async () => {\r\n      const result = await Service.post(\"/auth/forgot_password\", credentials);\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (result.value.status === 200) {\r\n        return Success.Empty();\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"auth/forgot-password\",\r\n          \"Could not send forgot password link.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Validates a password change token\r\n   */\r\n  static async validatePasswordChangeToken(credentials: { token: string }) {\r\n    return Try(async () => {\r\n      const result = await Service.get(\r\n        `/auth/change_password/${credentials.token}`\r\n      );\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (\r\n        result.value.status === 200 &&\r\n        result.value.data &&\r\n        typeof result.value.data === \"string\"\r\n      ) {\r\n        return new Success(result.value.data);\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"auth/change-password\",\r\n          \"Could not valildate password change token.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Change a user's password\r\n   */\r\n  static async changePassword(credentials: {\r\n    token: string;\r\n    password: string;\r\n  }) {\r\n    return Try(async () => {\r\n      const result = await Service.post(\r\n        `/auth/change_password/${credentials.token}`,\r\n        { password: credentials.password }\r\n      );\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (result.value.status === 200) {\r\n        return Success.Empty();\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"auth/change-password\",\r\n          \"Could not change password.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Request new confirmation email\r\n   */\r\n  static async requestConfirmationEmail(credentials: { email: string }) {\r\n    return Try(async () => {\r\n      const result = await Service.post<{ email: string }>(\r\n        `/auth/request_confirm_email`,\r\n        credentials\r\n      );\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (result.value.status === 200) {\r\n        return Success.Empty();\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"auth/request-confirm-email\",\r\n          \"Unable to get new confirmation email\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Confirm a user's email\r\n   */\r\n  static async confirmEmail(credentials: { token: string }) {\r\n    return Try(async () => {\r\n      const result = await Service.get(\r\n        `/auth/confirm_email/${credentials.token}`\r\n      );\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (result.value.status === 200) {\r\n        return Success.Empty();\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"auth/confirm-email\",\r\n          \"Could not confirm email.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Logs the user out.\r\n   */\r\n  static async logout() {\r\n    return Try(async () => {\r\n      const result = await Service.post(`/auth/logout`);\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (result.value.status === 200) {\r\n        return Success.Empty();\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"auth/logout\",\r\n          \"Could not log out.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Logs the user in with a Google account. Redirects the user.\r\n   */\r\n  static loginWithGoogle() {\r\n    window.location.href = Service.endpoint(\"/auth/google\");\r\n  }\r\n}\r\n","import { Action, action, Computed, computed, Thunk, thunk } from \"easy-peasy\";\r\nimport { Auth, JsonAuth } from \"../classes/Auth\";\r\nimport { AuthService } from \"../services/AuthService\";\r\nimport { StoreModel } from \"../store\";\r\n\r\nexport interface AuthModel {\r\n  /**\r\n   * Initialized state: has the profile been fetched at the least once\r\n   */\r\n  initialized: boolean;\r\n  _setInitialized: Action<AuthModel, boolean>;\r\n\r\n  /**\r\n   * Currently logged in user or null if none logged in\r\n   */\r\n  user: Auth | null;\r\n\r\n  /**\r\n   * Computed property for whether the user is currently logged in\r\n   */\r\n  isLoggedIn: Computed<AuthModel, boolean>;\r\n\r\n  /**\r\n   * Current access token for authentication in memory for security purposes.\r\n   * This is automatically refreshed when making a request with a service and\r\n   * should not be manually set.\r\n   */\r\n  accessToken: string | null;\r\n\r\n  /**\r\n   * Function to set the access token\r\n   */\r\n  _setAccessToken: Action<AuthModel, string>;\r\n\r\n  /**\r\n   * Action to set the current user with partial user JSON object\r\n   */\r\n  _login: Action<AuthModel, JsonAuth>;\r\n\r\n  /**\r\n   * Action to set the current user to null\r\n   */\r\n  _logout: Action<AuthModel, void>;\r\n\r\n  /**\r\n   * Function to get the currently logged in user's profile data and apply it\r\n   * to the user property. The logged in property is defined by the current\r\n   * refresh token.\r\n   */\r\n  getProfile: Thunk<\r\n    AuthModel,\r\n    void,\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof AuthService[\"getProfile\"]>\r\n  >;\r\n\r\n  /**\r\n   * Log in the current user with a Google account\r\n   */\r\n  loginWithGoogle: Thunk<\r\n    AuthModel,\r\n    void,\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof AuthService[\"loginWithGoogle\"]>\r\n  >;\r\n\r\n  /**\r\n   * Register the current user with email and password\r\n   */\r\n  registerWithEmailPassword: Thunk<\r\n    AuthModel,\r\n    Parameters<typeof AuthService[\"registerWithEmailAndPassword\"]>[0],\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof AuthService[\"registerWithEmailAndPassword\"]>\r\n  >;\r\n\r\n  /**\r\n   * Log in the current user with email and password\r\n   */\r\n  loginWithEmailPassword: Thunk<\r\n    AuthModel,\r\n    Parameters<typeof AuthService[\"loginWithEmailAndPassword\"]>[0],\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof AuthService[\"loginWithEmailAndPassword\"]>\r\n  >;\r\n\r\n  /**\r\n   * Forgot password\r\n   */\r\n  forgotPassword: Thunk<\r\n    AuthModel,\r\n    Parameters<typeof AuthService[\"forgotPassword\"]>[0],\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof AuthService[\"forgotPassword\"]>\r\n  >;\r\n\r\n  /**\r\n   * Log out the current user\r\n   */\r\n  logout: Thunk<\r\n    AuthModel,\r\n    void,\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof AuthService[\"logout\"]>\r\n  >;\r\n\r\n  /**\r\n   * Validate a change password token\r\n   */\r\n  validateChangePasswordToken: Thunk<\r\n    AuthModel,\r\n    Parameters<typeof AuthService[\"validatePasswordChangeToken\"]>[0],\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof AuthService[\"validatePasswordChangeToken\"]>\r\n  >;\r\n\r\n  /**\r\n   * Change a user's password\r\n   */\r\n  changePassword: Thunk<\r\n    AuthModel,\r\n    Parameters<typeof AuthService[\"changePassword\"]>[0],\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof AuthService[\"changePassword\"]>\r\n  >;\r\n\r\n  /**\r\n   * Confirm a user's email\r\n   */\r\n  confirmEmail: Thunk<\r\n    AuthModel,\r\n    Parameters<typeof AuthService[\"confirmEmail\"]>[0],\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof AuthService[\"confirmEmail\"]>\r\n  >;\r\n\r\n  /**\r\n   * Request a new confirmation email for user\r\n   */\r\n  requestConfirmationEmail: Thunk<\r\n    AuthModel,\r\n    Parameters<typeof AuthService[\"requestConfirmationEmail\"]>[0],\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof AuthService[\"requestConfirmationEmail\"]>\r\n  >;\r\n}\r\n\r\n/**\r\n * Implementation of the authentication model\r\n */\r\nexport const authModel: AuthModel = {\r\n  initialized: false,\r\n  _setInitialized: action((state, boolean) => {\r\n    state.initialized = boolean;\r\n  }),\r\n\r\n  user: null,\r\n\r\n  isLoggedIn: computed((state) => Boolean(state.user)),\r\n\r\n  accessToken: null,\r\n\r\n  _setAccessToken: action((state, newAccessToken) => {\r\n    state.accessToken = newAccessToken;\r\n  }),\r\n\r\n  _login: action((state, json) => {\r\n    if (Auth.isJson(json)) {\r\n      state.user = new Auth(json);\r\n    }\r\n  }),\r\n\r\n  _logout: action((state) => {\r\n    state.user = null;\r\n    state.accessToken = null;\r\n  }),\r\n\r\n  getProfile: thunk(async (actions, payload) => {\r\n    const profileResult = await AuthService.getProfile();\r\n    profileResult.onSuccess((profile) => {\r\n      actions._login(profile);\r\n    });\r\n    actions._setInitialized(true);\r\n    return profileResult;\r\n  }),\r\n\r\n  loginWithGoogle: thunk((actions, payload) => {\r\n    return AuthService.loginWithGoogle();\r\n  }),\r\n\r\n  loginWithEmailPassword: thunk(async (actions, payload) => {\r\n    const result = await AuthService.loginWithEmailAndPassword(payload);\r\n    result.onSuccess(async () => {\r\n      const profileResult = await AuthService.getProfile();\r\n      profileResult.onSuccess((profile) => {\r\n        actions._login(profile);\r\n      });\r\n    });\r\n    return result;\r\n  }),\r\n\r\n  registerWithEmailPassword: thunk(async (actions, payload) => {\r\n    const result = await AuthService.registerWithEmailAndPassword(payload);\r\n    if (result.isSuccess()) {\r\n      const profileResult = await AuthService.getProfile();\r\n      profileResult.onSuccess((profile) => {\r\n        actions._login(profile);\r\n      });\r\n    }\r\n    return result;\r\n  }),\r\n\r\n  forgotPassword: thunk(async (actions, payload) => {\r\n    const result = await AuthService.forgotPassword(payload);\r\n    return result;\r\n  }),\r\n\r\n  validateChangePasswordToken: thunk(async (actions, payload) => {\r\n    const result = await AuthService.validatePasswordChangeToken(payload);\r\n    return result;\r\n  }),\r\n\r\n  changePassword: thunk(async (actions, payload) => {\r\n    const result = await AuthService.changePassword(payload);\r\n    return result;\r\n  }),\r\n\r\n  confirmEmail: thunk(async (actions, payload) => {\r\n    const result = await AuthService.confirmEmail(payload);\r\n    return result;\r\n  }),\r\n\r\n  requestConfirmationEmail: thunk(async (actions, payload) => {\r\n    const result = await AuthService.requestConfirmationEmail(payload);\r\n    return result;\r\n  }),\r\n\r\n  logout: thunk(async (actions, payload) => {\r\n    const result = await AuthService.logout();\r\n    result.onSuccess(() => {\r\n      actions._logout();\r\n    });\r\n    return result;\r\n  }),\r\n};\r\n","export class MoneyAmount {\r\n  /**\r\n   * Value of money amount as integer in cents\r\n   */\r\n  private _value: number;\r\n\r\n  /**\r\n   * Construct a money amount from an integer value in cents.\r\n   *\r\n   * @throws Error if input value is not an integer.\r\n   */\r\n  constructor(cents: number) {\r\n    if (Math.trunc(cents) !== cents) {\r\n      throw new Error(\"Cannot construct money amount from non-integer value\");\r\n    }\r\n    this._value = cents;\r\n  }\r\n\r\n  /**\r\n   * The money amount's value as an integer in cents.\r\n   */\r\n  get value(): number {\r\n    return this._value;\r\n  }\r\n\r\n  /**\r\n   * The money amount's value in euros.\r\n   */\r\n  get decimalValue(): number {\r\n    return this._value / 100;\r\n  }\r\n\r\n  /**\r\n   * Get the value in euros as an integer\r\n   */\r\n  get euros() {\r\n    return Math.trunc(this._value / 100);\r\n  }\r\n\r\n  /**\r\n   * Get the amount of cents in value\r\n   *\r\n   * Returns the remainder when converting the value to euros,\r\n   * i.e. a value between 0 - 99, not the full value counted in cents.\r\n   */\r\n  get cents() {\r\n    return Math.floor(Math.abs(this._value) % 100);\r\n  }\r\n\r\n  /**\r\n   * Gets the sign of the money amount\r\n   *\r\n   * - Returns -1 for negative money amounts\r\n   * - Returns 0 for zero amounts\r\n   * - Returns +1 for positive money amounts\r\n   */\r\n  get sign(): -1 | 0 | 1 {\r\n    return this._value === 0 ? 0 : this._value > 0 ? 1 : -1;\r\n  }\r\n\r\n  /**\r\n   * True if the amount is a positive amount (> 0)\r\n   */\r\n  get isPositive() {\r\n    return this._value > 0;\r\n  }\r\n\r\n  /**\r\n   * True if the amount is a positive amount or zero (>= 0)\r\n   */\r\n  get isNonNegative() {\r\n    return this._value >= 0;\r\n  }\r\n\r\n  /**\r\n   * True if the amount is zero (== 0)\r\n   */\r\n  get isZero() {\r\n    return this._value === 0;\r\n  }\r\n\r\n  /**\r\n   * True if the amount is a negative amount or zero (<= 0)\r\n   */\r\n  get isNonPositive() {\r\n    return this._value <= 0;\r\n  }\r\n\r\n  /**\r\n   * True if the amount is a negative amount (< 0)\r\n   */\r\n  get isNegative() {\r\n    return this._value < 0;\r\n  }\r\n\r\n  /**\r\n   * Format the money amount to a string according to the given options\r\n   */\r\n  format(): string {\r\n    return this.decimalValue.toLocaleString(\"fi-FI\", {\r\n      style: \"currency\",\r\n      currency: \"EUR\",\r\n    });\r\n  }\r\n\r\n  add(that: MoneyAmount) {\r\n    return new MoneyAmount(this._value + that._value);\r\n  }\r\n\r\n  subtract(that: MoneyAmount) {\r\n    return new MoneyAmount(this._value - that._value);\r\n  }\r\n\r\n  static sum(values: MoneyAmount[]) {\r\n    return values.reduce((sum, value) => sum.add(value), new MoneyAmount(0));\r\n  }\r\n}\r\n","import * as uuid from \"uuid\";\r\nimport { MoneyAmount } from \"./MoneyAmount\";\r\nimport { object, string, number, ObjectSchema } from \"yup\";\r\n\r\nexport type JsonTransaction = {\r\n  id: string;\r\n  uid: string;\r\n  time: number;\r\n  category: string;\r\n  integerAmount: number;\r\n  comment?: string | undefined;\r\n};\r\n\r\nexport class Transaction {\r\n  date: Date;\r\n  category: string;\r\n  comment: string;\r\n  amount: MoneyAmount;\r\n  id: string;\r\n  uid: string;\r\n\r\n  constructor(json: JsonTransaction) {\r\n    this.date = new Date(json.time);\r\n    this.comment = json.comment || \"\";\r\n    this.category = json.category;\r\n    this.amount = new MoneyAmount(Math.floor(json.integerAmount));\r\n    this.id = json.id || uuid.v4();\r\n    this.uid = json.uid;\r\n  }\r\n\r\n  /**\r\n   * JsonSchema defining shape of JsonTransactions for yup validation\r\n   */\r\n  static JsonSchema: ObjectSchema<JsonTransaction> = object({\r\n    id: string().required(),\r\n    uid: string().required(),\r\n    time: number().positive().integer().required(),\r\n    category: string().min(1).required(),\r\n    integerAmount: number().integer().required(),\r\n    comment: string(),\r\n  }).required();\r\n\r\n  /**\r\n   * Is the value a valid JsonTransaction\r\n   */\r\n  static isJson(arg: any): arg is JsonTransaction {\r\n    try {\r\n      Transaction.JsonSchema.validateSync(arg);\r\n      return true;\r\n    } catch (error) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Is the value an array of valid JsonTransactions\r\n   */\r\n  static isJsonArray(arg: any): arg is JsonTransaction[] {\r\n    return Array.isArray(arg) && arg.every(Transaction.isJson);\r\n  }\r\n\r\n  /**\r\n   * Convert Transaction to JsonTransaction\r\n   */\r\n  toJson(): JsonTransaction {\r\n    return {\r\n      time: this.date.getTime(),\r\n      category: this.category,\r\n      comment: this.comment,\r\n      integerAmount: this.amount.value,\r\n      id: this.id,\r\n      uid: this.uid,\r\n    };\r\n  }\r\n}\r\n","import { Service } from \"./Service\";\r\nimport { Failure, Success } from \"../utils/Result/Result\";\r\nimport { Try } from \"../utils/Result/Try\";\r\nimport { JsonTransaction, Transaction } from \"../classes/Transaction\";\r\n\r\nexport class TransactionService extends Service {\r\n  /**\r\n   * Get all transactions for user as Result\r\n   */\r\n  static async getTransactions() {\r\n    return Try(async () => {\r\n      const result = await Service.get(\"/transactions\");\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (Transaction.isJsonArray(result.value.data)) {\r\n        return new Success(result.value.data);\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"transactions/get\",\r\n          \"Could not get transactions.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Post a transaction (in json, without id or uid) and return\r\n   * created json transaction response as Result.\r\n   */\r\n  static async postTransaction(json: Omit<JsonTransaction, \"id\" | \"uid\">) {\r\n    return Try(async () => {\r\n      const result = await Service.post(\"/transactions\", json);\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (Transaction.isJson(result.value.data)) {\r\n        return new Success(result.value.data);\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"transactions/post\",\r\n          \"Could not post transaction.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Delete a transaction by ID and return empty Result.\r\n   */\r\n  static async deleteTransaction(id: string) {\r\n    return Try(async () => {\r\n      const result = await Service.delete(`/transactions/${id}`);\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (result.value.status === 200) {\r\n        return Success.Empty();\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"transactions/delete\",\r\n          \"Could not delete transaction.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Put a transaction on the server as json (upsert) and\r\n   * return upserted json transaction as Result.\r\n   */\r\n  static async putTransaction(json: JsonTransaction) {\r\n    return Try(async () => {\r\n      const result = await Service.put(`/transactions/${json.id}`, json);\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (Transaction.isJson(result.value.data)) {\r\n        return new Success(result.value.data);\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"transactions/put\",\r\n          \"Could not put transaction\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Patch a transaction on the server as json (partial update)\r\n   * and return updated json transaction as Result.\r\n   */\r\n  static async patchTransaction(json: JsonTransaction) {\r\n    return Try(async () => {\r\n      const result = await Service.patch(`/transactions/${json.id}`, json);\r\n      if (result.isFailure()) {\r\n        return result;\r\n      } else if (Transaction.isJson(result.value.data)) {\r\n        return new Success(result.value.data);\r\n      } else {\r\n        return Failure.InvalidResponse(\r\n          result.value,\r\n          \"transactions/patch\",\r\n          \"Could not patch transaction.\"\r\n        );\r\n      }\r\n    });\r\n  }\r\n}\r\n","import * as datefns from \"date-fns\";\r\n\r\nexport function groupByDate<T>(\r\n  items: T[],\r\n  getDate: (t: T) => Date,\r\n  options?: { sort?: boolean }\r\n): { date: Date; items: T[] }[] {\r\n  // Function to extract a key from an item which has a date\r\n  function getKey(item: T): string {\r\n    const date = getDate(item);\r\n    return datefns.lightFormat(date, \"yyyy-MM-dd\");\r\n  }\r\n\r\n  // Get all items by their keys\r\n  const itemsByKey = items.reduce((res, item) => {\r\n    const key = getKey(item);\r\n    return {\r\n      ...res,\r\n      [key]: [...(res[key] ?? []), item],\r\n    };\r\n  }, {} as Record<string, T[]>);\r\n\r\n  // Map to array, where each key is mapped to a date\r\n  const result = Object.entries(itemsByKey).map((entry) => {\r\n    return {\r\n      date: datefns.startOfDay(new Date(entry[0])),\r\n      items: entry[1],\r\n    };\r\n  });\r\n\r\n  // Return result, optionally sorted\r\n  if (options?.sort) {\r\n    return result.sort((a, b) => {\r\n      return b.date.getTime() - a.date.getTime();\r\n    });\r\n  } else {\r\n    return result;\r\n  }\r\n}\r\n","export type DateCompareOperator = \">\" | \">=\" | \"==\" | \"<=\" | \"<\";\r\n\r\n/**\r\n * Utility function to compare two dates, where only the date is taken into\r\n * account, not the time.\r\n *\r\n * @param a  Left hand operator date\r\n * @param op Operator to specify which comparison to run\r\n * @param b  Right hand operator date\r\n */\r\nexport function compareDate(a: Date, op: DateCompareOperator, b: Date) {\r\n  // Serialize dates for easy comparison\r\n  const _a = serializeDate(a);\r\n  const _b = serializeDate(b);\r\n\r\n  switch (op) {\r\n    case \"<\":\r\n      return _a < _b;\r\n    case \"<=\":\r\n      return _a <= _b;\r\n    case \"==\":\r\n      return _a === _b;\r\n    case \">=\":\r\n      return _a >= _b;\r\n    case \">\":\r\n      return _a > _b;\r\n  }\r\n}\r\n\r\n/**\r\n * Helper function for above function to serialize dates, taking only into account\r\n * the date, month and year, not the time.\r\n *\r\n * @param date Date to serialize\r\n */\r\nfunction serializeDate(date: Date) {\r\n  return date.getFullYear() * 341 + date.getMonth() * 31 + date.getDate();\r\n}\r\n","import { computed, Computed } from \"easy-peasy\";\r\nimport { Transaction } from \"../classes/Transaction\";\r\nimport { MoneyAmount } from \"../classes/MoneyAmount\";\r\nimport { groupByDate } from \"../utils/groupByDate/groupByDate\";\r\nimport { StoreModel } from \"../store\";\r\nimport { compareDate } from \"../utils/compareDate/compareDate\";\r\n\r\nexport interface FilteredTransactionsModel {\r\n  /**\r\n   * All user's current transactions after filterign\r\n   */\r\n  items: Computed<FilteredTransactionsModel, Transaction[], StoreModel>;\r\n\r\n  /**\r\n   * Filtered transactions grouped and sorted by dates\r\n   */\r\n  itemsByDates: Computed<\r\n    FilteredTransactionsModel,\r\n    { date: Date; items: Transaction[] }[],\r\n    StoreModel\r\n  >;\r\n\r\n  /**\r\n   * Filtered amount of transactions\r\n   */\r\n  count: Computed<FilteredTransactionsModel, number, StoreModel>;\r\n\r\n  /**\r\n   * Sums of filtered transactions\r\n   */\r\n  sums: Computed<\r\n    FilteredTransactionsModel,\r\n    {\r\n      all: MoneyAmount;\r\n      expenses: MoneyAmount;\r\n      incomes: MoneyAmount;\r\n    },\r\n    StoreModel\r\n  >;\r\n}\r\n\r\nexport const filteredTransactionsModel: FilteredTransactionsModel = {\r\n  items: computed(\r\n    [\r\n      (_, storeState) => storeState.transactions.items,\r\n      (_, storeState) => storeState.interval.startDate,\r\n      (_, storeState) => storeState.interval.endDate,\r\n      (_, storeState) => storeState.filters.searchTerm,\r\n      (_, storeState) => storeState.filters.minAmount,\r\n      (_, storeState) => storeState.filters.maxAmount,\r\n      (_, storeState) => storeState.filters.excludedCategories,\r\n    ],\r\n    (\r\n      items,\r\n      startDate,\r\n      endDate,\r\n      searchTerm,\r\n      minAmount,\r\n      maxAmount,\r\n      excludedCategories\r\n    ) => {\r\n      return items.filter((item) => {\r\n        // Filter by start date\r\n        if (compareDate(item.date, \"<\", startDate)) {\r\n          return false;\r\n        }\r\n\r\n        // Filter by end date\r\n        if (compareDate(item.date, \">\", endDate)) {\r\n          return false;\r\n        }\r\n\r\n        // Filter by minimum amount\r\n        if (item.amount.value < minAmount) {\r\n          return false;\r\n        }\r\n\r\n        // Filter by maximum amount\r\n        if (item.amount.value > maxAmount) {\r\n          return false;\r\n        }\r\n\r\n        // Filter by category\r\n        if (excludedCategories.includes(item.category)) {\r\n          return false;\r\n        }\r\n\r\n        // Filter by search term\r\n        if (\r\n          !(\r\n            item.amount.format().toLowerCase().includes(searchTerm) ||\r\n            item.category.toLowerCase().includes(searchTerm) ||\r\n            item.comment.toLowerCase().includes(searchTerm)\r\n          )\r\n        ) {\r\n          return false;\r\n        }\r\n\r\n        // All filters passed: include\r\n        return true;\r\n      });\r\n    }\r\n  ),\r\n\r\n  itemsByDates: computed(\r\n    [(_, storeState) => storeState.transactions.filtered.items],\r\n    (items) => {\r\n      return groupByDate(items, (_) => _.date, { sort: true });\r\n    }\r\n  ),\r\n\r\n  count: computed(\r\n    [(_, storeState) => storeState.transactions.filtered.items],\r\n    (items) => {\r\n      return items.length;\r\n    }\r\n  ),\r\n\r\n  sums: computed(\r\n    [(_, storeState) => storeState.transactions.filtered.items],\r\n    (items) => {\r\n      const incomes = items\r\n        .filter((_) => _.amount.isPositive)\r\n        .reduce((sum, item) => sum + item.amount.value, 0);\r\n      const expenses = items\r\n        .filter((_) => _.amount.isNegative)\r\n        .reduce((sum, item) => sum + item.amount.value, 0);\r\n      return {\r\n        all: new MoneyAmount(incomes + expenses),\r\n        incomes: new MoneyAmount(incomes),\r\n        expenses: new MoneyAmount(expenses),\r\n      };\r\n    }\r\n  ),\r\n};\r\n","import {\r\n  Action,\r\n  action,\r\n  Computed,\r\n  computed,\r\n  Thunk,\r\n  thunk,\r\n  ThunkOn,\r\n  thunkOn,\r\n} from \"easy-peasy\";\r\nimport { JsonTransaction, Transaction } from \"../classes/Transaction\";\r\nimport { TransactionService } from \"../services/TransactionService\";\r\nimport { StoreModel } from \"../store\";\r\nimport { groupByDate } from \"../utils/groupByDate/groupByDate\";\r\nimport { MoneyAmount } from \"../classes/MoneyAmount\";\r\nimport {\r\n  filteredTransactionsModel,\r\n  FilteredTransactionsModel,\r\n} from \"./transactions.filtered.model\";\r\n\r\nexport interface TransactionsModel {\r\n  /**\r\n   * All user's current transactions\r\n   */\r\n  items: Transaction[];\r\n\r\n  /**\r\n   * Current transactions grouped and sorted by dates\r\n   */\r\n  itemsByDates: Computed<\r\n    TransactionsModel,\r\n    { date: Date; items: Transaction[] }[]\r\n  >;\r\n\r\n  /**\r\n   * Current amount of transactions\r\n   */\r\n  count: Computed<TransactionsModel, number>;\r\n\r\n  /**\r\n   * Sum of transactions\r\n   */\r\n  sums: Computed<\r\n    TransactionsModel,\r\n    {\r\n      all: MoneyAmount;\r\n      expenses: MoneyAmount;\r\n      incomes: MoneyAmount;\r\n    }\r\n  >;\r\n\r\n  /**\r\n   * Filtered properties (copies of the above properties using only\r\n   * filtered items)\r\n   */\r\n  filtered: FilteredTransactionsModel;\r\n\r\n  /**\r\n   * All different categories\r\n   */\r\n  categories: Computed<TransactionsModel, string[]>;\r\n\r\n  /**\r\n   * Minimum possible amount\r\n   */\r\n  minimumAmount: Computed<TransactionsModel, MoneyAmount>;\r\n\r\n  /**\r\n   * Maximum possible amount\r\n   */\r\n  maximumAmount: Computed<TransactionsModel, MoneyAmount>;\r\n\r\n  /**\r\n   * Fetch all transactions for user from server\r\n   */\r\n  getTransactions: Thunk<\r\n    TransactionsModel,\r\n    void,\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof TransactionService[\"getTransactions\"]>\r\n  >;\r\n\r\n  /**\r\n   * Action called by get transaction thunk to update get result to state\r\n   */\r\n  _getTransactions: Action<TransactionsModel, JsonTransaction[]>;\r\n\r\n  /**\r\n   * Post and update transaction to state\r\n   */\r\n  postTransaction: Thunk<\r\n    TransactionsModel,\r\n    Parameters<typeof TransactionService[\"postTransaction\"]>[0],\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof TransactionService[\"postTransaction\"]>\r\n  >;\r\n\r\n  /**\r\n   * Action called by post transaction thunk to update post result to state\r\n   */\r\n  _postTransaction: Action<TransactionsModel, JsonTransaction>;\r\n\r\n  /**\r\n   * Delete and remove transaction from state\r\n   */\r\n  deleteTransaction: Thunk<\r\n    TransactionsModel,\r\n    string,\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof TransactionService[\"deleteTransaction\"]>\r\n  >;\r\n\r\n  /**\r\n   * Action called by delete transaction thunk to update delete result to state\r\n   */\r\n  _deleteTransaction: Action<TransactionsModel, string>;\r\n\r\n  /**\r\n   * Put and update transaction to state\r\n   */\r\n  putTransaction: Thunk<\r\n    TransactionsModel,\r\n    Parameters<typeof TransactionService[\"putTransaction\"]>[0],\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof TransactionService[\"putTransaction\"]>\r\n  >;\r\n\r\n  /**\r\n   * Action called by put transaction thunk to update put result to state\r\n   */\r\n  _putTransaction: Action<TransactionsModel, JsonTransaction>;\r\n\r\n  /**\r\n   * Patch and update transaction to state\r\n   */\r\n  patchTransaction: Thunk<\r\n    TransactionsModel,\r\n    Parameters<typeof TransactionService[\"patchTransaction\"]>[0],\r\n    any,\r\n    StoreModel,\r\n    ReturnType<typeof TransactionService[\"patchTransaction\"]>\r\n  >;\r\n\r\n  /**\r\n   * Action called by patch transaction thunk to update patch result to state\r\n   */\r\n  _patchTransaction: Action<TransactionsModel, JsonTransaction>;\r\n\r\n  /**\r\n   * Listening to auth changes\r\n   */\r\n  onAuthChanged: ThunkOn<TransactionsModel, any, StoreModel>;\r\n\r\n  _clearTransactions: Action<TransactionsModel, void>;\r\n}\r\n\r\nexport const transactionsModel: TransactionsModel = {\r\n  items: [],\r\n\r\n  itemsByDates: computed((state) => {\r\n    return groupByDate(state.items, (_) => _.date, { sort: true });\r\n  }),\r\n\r\n  count: computed((state) => state.items.length),\r\n\r\n  sums: computed((state) => {\r\n    const incomes = state.items\r\n      .filter((_) => _.amount.isPositive)\r\n      .reduce((sum, item) => sum + item.amount.value, 0);\r\n    const expenses = state.items\r\n      .filter((_) => _.amount.isNegative)\r\n      .reduce((sum, item) => sum + item.amount.value, 0);\r\n    return {\r\n      all: new MoneyAmount(incomes + expenses),\r\n      incomes: new MoneyAmount(incomes),\r\n      expenses: new MoneyAmount(expenses),\r\n    };\r\n  }),\r\n\r\n  filtered: filteredTransactionsModel,\r\n\r\n  categories: computed((state) =>\r\n    state.items.map((_) => _.category).filter((c, i, a) => a.indexOf(c) === i)\r\n  ),\r\n\r\n  minimumAmount: computed((state) => {\r\n    return state.items.reduce((min, next) => {\r\n      return next.amount.value < min.value ? next.amount : min;\r\n    }, new MoneyAmount(0));\r\n  }),\r\n\r\n  maximumAmount: computed((state) => {\r\n    return state.items.reduce((max, next) => {\r\n      return next.amount.value > max.value ? next.amount : max;\r\n    }, new MoneyAmount(0));\r\n  }),\r\n\r\n  getTransactions: thunk(async (actions, payload) => {\r\n    const result = await TransactionService.getTransactions();\r\n    result.onSuccess((json) => actions._getTransactions(json));\r\n    return result;\r\n  }),\r\n\r\n  _getTransactions: action((state, jsons) => {\r\n    state.items = jsons.map((json) => new Transaction(json));\r\n  }),\r\n\r\n  postTransaction: thunk(async (actions, json) => {\r\n    const result = await TransactionService.postTransaction(json);\r\n    result.onSuccess((json) => actions._postTransaction(json));\r\n    return result;\r\n  }),\r\n\r\n  _postTransaction: action((state, json) => {\r\n    state.items.push(new Transaction(json));\r\n  }),\r\n\r\n  deleteTransaction: thunk(async (actions, id) => {\r\n    const result = await TransactionService.deleteTransaction(id);\r\n    result.onSuccess(() => actions.deleteTransaction(id));\r\n    return result;\r\n  }),\r\n\r\n  _deleteTransaction: action((state, id) => {\r\n    state.items = state.items.filter((item) => item.id !== id);\r\n  }),\r\n\r\n  putTransaction: thunk(async (actions, json) => {\r\n    const result = await TransactionService.putTransaction(json);\r\n    result.onSuccess((json) => actions._putTransaction(json));\r\n    return result;\r\n  }),\r\n\r\n  _putTransaction: action((state, json) => {\r\n    state.items = state.items.map((item) =>\r\n      item.id === json.id ? new Transaction(json) : item\r\n    );\r\n  }),\r\n\r\n  patchTransaction: thunk(async (actions, json) => {\r\n    const result = await TransactionService.patchTransaction(json);\r\n    result.onSuccess((json) => actions._patchTransaction(json));\r\n    return result;\r\n  }),\r\n\r\n  _patchTransaction: action((state, json) => {\r\n    state.items = state.items.map((item) =>\r\n      item.id === json.id ? new Transaction(json) : item\r\n    );\r\n  }),\r\n\r\n  onAuthChanged: thunkOn(\r\n    (_, store) => [store.auth.logout, store.auth._login],\r\n    (actions, target) => {\r\n      const [loggedOut, loggedIn] = target.resolvedTargets;\r\n      switch (target.type) {\r\n        case loggedOut:\r\n          actions._clearTransactions();\r\n          break;\r\n        case loggedIn:\r\n          actions.getTransactions();\r\n          break;\r\n      }\r\n    }\r\n  ),\r\n\r\n  _clearTransactions: action((state) => {\r\n    state.items = [];\r\n  }),\r\n};\r\n","/**\r\n * Minimum possible date (`0` or `01/01/1970`)\r\n */\r\nexport const MINIMUM_DATE = new Date(0);\r\n\r\n/**\r\n * Maximum possible date (`253370757600000` or `01/01/9999`)\r\n */\r\nexport const MAXIMUM_DATE = new Date(253370757600000);\r\n","import { createStore, createTypedHooks } from \"easy-peasy\";\r\nimport { AuthModel, authModel } from \"./models/auth.model\";\r\nimport {\r\n  TransactionsModel,\r\n  transactionsModel,\r\n} from \"./models/transactions.model\";\r\nimport { intervalModel, IntervalModel } from \"./models/interval.model\";\r\nimport { FiltersModel, filtersModel } from \"./models/filters.model\";\r\n\r\nexport interface StoreModel {\r\n  transactions: TransactionsModel;\r\n  interval: IntervalModel;\r\n  filters: FiltersModel;\r\n  auth: AuthModel;\r\n}\r\n\r\nconst storeModel: StoreModel = {\r\n  transactions: transactionsModel,\r\n  interval: intervalModel,\r\n  filters: filtersModel,\r\n  auth: authModel,\r\n};\r\n\r\nexport const store = createStore(storeModel);\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  (window as any).store = store;\r\n}\r\n\r\nexport const typedHooks = createTypedHooks<StoreModel>();\r\n\r\nexport const useStoreActions = typedHooks.useStoreActions;\r\nexport const useStoreDispatch = typedHooks.useStoreDispatch;\r\nexport const useStoreState = typedHooks.useStoreState;\r\nexport const useStore = typedHooks.useStore;\r\n","import { Action, action, Computed, computed } from \"easy-peasy\";\r\nimport * as datefns from \"date-fns\";\r\nimport { compareDate } from \"../utils/compareDate/compareDate\";\r\nimport { MINIMUM_DATE, MAXIMUM_DATE } from \"../constants\";\r\n\r\nexport type IntervalModel = {\r\n  /**\r\n   * Date filter start limit.\r\n   *\r\n   * All transactions with the same or later date will pass this filter.\r\n   * The time of day is not taken into account while comparing dates.\r\n   *\r\n   * Defaults to start date of current month.\r\n   */\r\n  startDate: Date;\r\n\r\n  /**\r\n   * Date filter end limit.\r\n   *\r\n   * All transactions with the same or earlier date will pass this filter.\r\n   * The time of day is not taken into account while comparing dates.\r\n   *\r\n   * Defaults to end date of current month.\r\n   */\r\n  endDate: Date;\r\n\r\n  /**\r\n   * Action to manually specify the start date filter\r\n   */\r\n  setStartDate: Action<IntervalModel, Date>;\r\n\r\n  /**\r\n   * Action to manually specify the end date filter\r\n   */\r\n  setEndDate: Action<IntervalModel, Date>;\r\n\r\n  /**\r\n   * Action to manually specify start and end dates for interval simultaneously\r\n   */\r\n  setInterval: Action<IntervalModel, { startDate: Date; endDate: Date }>;\r\n\r\n  /**\r\n   * Move interval forward\r\n   *\r\n   * - If interval is year, select next year\r\n   * - If interval is month, select next month\r\n   * - If interval is week, select next week\r\n   * - If interval is other, select next interval of same length\r\n   *   starting from the end date of the current interval.\r\n   */\r\n  nextInterval: Action<IntervalModel, void>;\r\n\r\n  /**\r\n   * Move interval backwards\r\n   *\r\n   * - If interval is year, select previous year\r\n   * - If interval is month, select previous month\r\n   * - If interval is week, select previous week\r\n   * - If interval is other, select previous interval of same length\r\n   *   ending at the starting date of the current interval.\r\n   */\r\n  previousInterval: Action<IntervalModel, void>;\r\n\r\n  /**\r\n   * Move interval to nearest day\r\n   */\r\n  dayInterval: Action<IntervalModel, void>;\r\n\r\n  /**\r\n   * Move interval to nearest week\r\n   */\r\n  weekInterval: Action<IntervalModel, void>;\r\n\r\n  /**\r\n   * Move interval to nearest month\r\n   */\r\n  monthInterval: Action<IntervalModel, void>;\r\n\r\n  /**\r\n   * Move interval to nearest year\r\n   */\r\n  yearInterval: Action<IntervalModel, void>;\r\n\r\n  /**\r\n   * Select all (infinite interval)\r\n   */\r\n  allInterval: Action<IntervalModel, void>;\r\n\r\n  /**\r\n   * Return the interval to the current day / week / month / year\r\n   * / custom interval depending on which one it currently is\r\n   */\r\n  now: Action<IntervalModel, void>;\r\n\r\n  /**\r\n   * Is the current date interval a signle day\r\n   */\r\n  isDay: Computed<IntervalModel, boolean>;\r\n\r\n  /**\r\n   * Is the current date interval a single full week\r\n   */\r\n  isWeek: Computed<IntervalModel, boolean>;\r\n\r\n  /**\r\n   * Is the current date interval a single full month\r\n   */\r\n  isMonth: Computed<IntervalModel, boolean>;\r\n\r\n  /**\r\n   * Is the current date interval a single full year\r\n   */\r\n  isYear: Computed<IntervalModel, boolean>;\r\n\r\n  /**\r\n   * Are all selected (\"infinite interval\")\r\n   */\r\n  isAll: Computed<IntervalModel, boolean>;\r\n\r\n  /**\r\n   * Interval length in days\r\n   */\r\n  length: Computed<IntervalModel, number>;\r\n\r\n  /**\r\n   * Does the current period include today\r\n   */\r\n  includesToday: Computed<IntervalModel, boolean>;\r\n\r\n  /**\r\n   * Smarter display string that displays in format...\r\n   *\r\n   * - `MMMM, yyyy` (e.g. `July, 1999`) when `isMonth` is `true`\r\n   * - `MMMM, yyyy` (e.g. `July, 1999`) when `isMonth` is `true`\r\n   *\r\n   * Else falls back to `displayString` property and the\r\n   * `d.M. - d.M.yyyy` or `d.M.yyyy - d.M.yyyy` format.\r\n   */\r\n  smartDisplayString: Computed<IntervalModel, string>;\r\n\r\n  /**\r\n   * Display string of format\r\n   *\r\n   * `d.M. - d.M.yyyy` or `d.M.yyyy - d.M.yyyy` if dates\r\n   * are in different years.\r\n   *\r\n   * For example\r\n   * - `1.12. - 7.12.2020`\r\n   * - `30.12.1999 - 5.1.2000`\r\n   */\r\n  displayString: Computed<IntervalModel, string>;\r\n};\r\n\r\nexport const intervalModel: IntervalModel = {\r\n  startDate: datefns.startOfMonth(new Date()),\r\n\r\n  endDate: datefns.endOfMonth(new Date()),\r\n\r\n  setStartDate: action((state, date) => {\r\n    if (compareDate(date, \">\", state.endDate)) {\r\n      throw new Error(\"Start date cannot be after end date\");\r\n    } else {\r\n      state.startDate = date;\r\n    }\r\n  }),\r\n\r\n  setEndDate: action((state, date) => {\r\n    if (compareDate(date, \"<\", state.startDate)) {\r\n      throw new Error(\"End date cannot be before start date\");\r\n    } else {\r\n      state.endDate = date;\r\n    }\r\n  }),\r\n\r\n  setInterval: action((state, dates) => {\r\n    if (compareDate(dates.startDate, \">\", dates.endDate)) {\r\n      throw new Error(\"End date cannot be before start date\");\r\n    } else {\r\n      state.startDate = dates.startDate;\r\n      state.endDate = dates.endDate;\r\n    }\r\n  }),\r\n\r\n  nextInterval: action((state) => {\r\n    if (state.isAll) return;\r\n    const newStartDate = datefns.addDays(state.endDate, 1);\r\n    if (state.isYear) {\r\n      state.endDate = datefns.endOfYear(newStartDate);\r\n    } else if (state.isMonth) {\r\n      state.endDate = datefns.endOfMonth(newStartDate);\r\n    } else if (state.isWeek) {\r\n      state.endDate = datefns.endOfWeek(newStartDate, { weekStartsOn: 1 });\r\n    } else {\r\n      state.endDate = datefns.addDays(newStartDate, state.length);\r\n    }\r\n    state.startDate = newStartDate;\r\n  }),\r\n\r\n  previousInterval: action((state) => {\r\n    if (state.isAll) return;\r\n    const newEndDate = datefns.subDays(state.startDate, 1);\r\n    if (state.isYear) {\r\n      state.startDate = datefns.startOfYear(newEndDate);\r\n    } else if (state.isMonth) {\r\n      state.startDate = datefns.startOfMonth(newEndDate);\r\n    } else if (state.isWeek) {\r\n      state.startDate = datefns.startOfWeek(newEndDate, { weekStartsOn: 1 });\r\n    } else {\r\n      state.startDate = datefns.subDays(newEndDate, state.length);\r\n    }\r\n    state.endDate = newEndDate;\r\n  }),\r\n\r\n  length: computed((state) => {\r\n    return datefns.differenceInDays(state.startDate, state.endDate);\r\n  }),\r\n\r\n  dayInterval: action((state) => {\r\n    const date = state.isAll ? new Date() : state.startDate;\r\n    state.startDate = datefns.startOfDay(date);\r\n    state.endDate = datefns.endOfDay(date);\r\n  }),\r\n\r\n  weekInterval: action((state) => {\r\n    const date = state.isAll ? new Date() : state.startDate;\r\n    state.startDate = datefns.startOfWeek(date, { weekStartsOn: 1 });\r\n    state.endDate = datefns.endOfWeek(date, { weekStartsOn: 1 });\r\n  }),\r\n\r\n  monthInterval: action((state) => {\r\n    const date = state.isAll ? new Date() : state.startDate;\r\n    state.startDate = datefns.startOfMonth(date);\r\n    state.endDate = datefns.endOfMonth(date);\r\n  }),\r\n\r\n  yearInterval: action((state) => {\r\n    const date = state.isAll ? new Date() : state.startDate;\r\n    state.startDate = datefns.startOfYear(date);\r\n    state.endDate = datefns.endOfYear(date);\r\n  }),\r\n\r\n  allInterval: action((state) => {\r\n    state.startDate = MINIMUM_DATE;\r\n    state.endDate = MAXIMUM_DATE;\r\n  }),\r\n\r\n  now: action((state) => {\r\n    const today = new Date();\r\n    if (state.isYear) {\r\n      state.startDate = datefns.startOfYear(today);\r\n      state.endDate = datefns.endOfYear(today);\r\n    } else if (state.isMonth) {\r\n      state.startDate = datefns.startOfMonth(today);\r\n      state.endDate = datefns.endOfMonth(today);\r\n    } else if (state.isWeek) {\r\n      state.startDate = datefns.startOfWeek(today, { weekStartsOn: 1 });\r\n      state.endDate = datefns.endOfWeek(today, { weekStartsOn: 1 });\r\n    } else if (state.isDay) {\r\n      state.startDate = datefns.startOfDay(today);\r\n      state.endDate = datefns.endOfDay(today);\r\n    } else {\r\n      state.endDate = datefns.endOfDay(datefns.addDays(today, state.length));\r\n      state.startDate = datefns.startOfDay(today);\r\n    }\r\n  }),\r\n\r\n  isAll: computed((state) => {\r\n    return (\r\n      compareDate(state.startDate, \"==\", MINIMUM_DATE) &&\r\n      compareDate(state.endDate, \"==\", MAXIMUM_DATE)\r\n    );\r\n  }),\r\n\r\n  isYear: computed((state) => {\r\n    return (\r\n      datefns.isSameYear(state.startDate, state.endDate) &&\r\n      datefns.getDayOfYear(state.startDate) === 1 &&\r\n      datefns.isSameDay(state.endDate, datefns.lastDayOfYear(state.endDate))\r\n    );\r\n  }),\r\n\r\n  isMonth: computed((state) => {\r\n    return (\r\n      datefns.isSameMonth(state.startDate, state.endDate) &&\r\n      datefns.isFirstDayOfMonth(state.startDate) &&\r\n      datefns.isLastDayOfMonth(state.endDate)\r\n    );\r\n  }),\r\n\r\n  isWeek: computed((state) => {\r\n    return (\r\n      datefns.isSameWeek(state.startDate, state.endDate, { weekStartsOn: 1 }) &&\r\n      datefns.getDay(state.startDate) === 1 &&\r\n      datefns.getDay(state.endDate) === 0\r\n    );\r\n  }),\r\n\r\n  isDay: computed((state) => {\r\n    return datefns.isSameDay(state.startDate, state.endDate);\r\n  }),\r\n\r\n  includesToday: computed((state) => {\r\n    const today = new Date();\r\n    return (\r\n      compareDate(today, \">=\", state.startDate) &&\r\n      compareDate(today, \"<=\", state.endDate)\r\n    );\r\n  }),\r\n\r\n  smartDisplayString: computed((state) => {\r\n    if (state.isAll) {\r\n      return \"All\";\r\n    } else if (state.isYear) {\r\n      return datefns.format(state.startDate, \"yyyy\");\r\n    } else if (state.isMonth) {\r\n      return datefns.format(state.startDate, \"MMMM, yyyy\");\r\n    } else if (state.isDay) {\r\n      return datefns.format(state.startDate, \"d.M.yyyy\");\r\n    } else {\r\n      return state.displayString;\r\n    }\r\n  }),\r\n\r\n  displayString: computed((state) => {\r\n    return (\r\n      (datefns.isSameYear(state.startDate, state.endDate)\r\n        ? datefns.format(state.startDate, \"d.M\")\r\n        : datefns.format(state.startDate, \"d.M.yyyy\")) +\r\n      \" - \" +\r\n      datefns.format(state.endDate, \"d.M.yyyy\")\r\n    );\r\n  }),\r\n};\r\n","import { Action, action } from \"easy-peasy\";\r\n\r\nexport type FiltersModel = {\r\n  /**\r\n   * Current search term for matching transactions. Defaults\r\n   * to empty string when unused.\r\n   */\r\n  searchTerm: string;\r\n\r\n  /**\r\n   * Current minimum amount for matching transactions.\r\n   * Defaults to -Infinity when unused.\r\n   */\r\n  minAmount: number;\r\n\r\n  /**\r\n   * Current maximum amount for matching transactions.\r\n   * Defaults to +Infinity when unused.\r\n   */\r\n  maxAmount: number;\r\n\r\n  /**\r\n   * Categories to exclude while filtering.\r\n   * Defaults to [].\r\n   */\r\n  excludedCategories: string[];\r\n\r\n  /**\r\n   * Reset all filters action\r\n   */\r\n  resetAll: Action<FiltersModel, void>;\r\n\r\n  /**\r\n   * Set search term action\r\n   */\r\n  setSearchTerm: Action<FiltersModel, string>;\r\n\r\n  /**\r\n   * Reset search term action\r\n   */\r\n  resetSearchTerm: Action<FiltersModel, void>;\r\n\r\n  /**\r\n   * Set amount filter action\r\n   *\r\n   * The first argument in the tuple will define a new minimum\r\n   * amount limit if defined, else does not change minimum limit\r\n   *\r\n   * The second argument in the tuple will define a new maximum\r\n   * amount limit if defined, else does not change maximum limit\r\n   */\r\n  setAmount: Action<FiltersModel, [number | undefined, number | undefined]>;\r\n\r\n  /**\r\n   * Reset amount filter action\r\n   */\r\n  resetAmount: Action<FiltersModel, void>;\r\n\r\n  /**\r\n   * Exclude a category\r\n   */\r\n  excludeCategory: Action<FiltersModel, string | string[]>;\r\n\r\n  /**\r\n   * Include a category\r\n   */\r\n  includeCategory: Action<FiltersModel, string>;\r\n\r\n  /**\r\n   * Reset excluded categories action\r\n   */\r\n  resetExcludedCategories: Action<FiltersModel, void>;\r\n};\r\n\r\nexport const filtersModel: FiltersModel = {\r\n  searchTerm: \"\",\r\n  minAmount: Number.NEGATIVE_INFINITY,\r\n  maxAmount: Number.POSITIVE_INFINITY,\r\n  excludedCategories: [],\r\n\r\n  resetAll: action((state) => {\r\n    state.searchTerm = \"\";\r\n    state.minAmount = Number.NEGATIVE_INFINITY;\r\n    state.maxAmount = Number.POSITIVE_INFINITY;\r\n    state.excludedCategories = [];\r\n  }),\r\n\r\n  setSearchTerm: action((state, value) => {\r\n    state.searchTerm = value;\r\n  }),\r\n\r\n  resetSearchTerm: action((state) => {\r\n    state.searchTerm = \"\";\r\n  }),\r\n\r\n  setAmount: action((state, [min, max]) => {\r\n    if (typeof min === \"number\") {\r\n      state.minAmount = min;\r\n    }\r\n    if (typeof max === \"number\") {\r\n      state.maxAmount = max;\r\n    }\r\n  }),\r\n\r\n  resetAmount: action((state) => {\r\n    state.minAmount = Number.NEGATIVE_INFINITY;\r\n    state.maxAmount = Number.POSITIVE_INFINITY;\r\n  }),\r\n\r\n  excludeCategory: action((state, category) => {\r\n    state.excludedCategories.push(\r\n      ...(Array.isArray(category) ? category : [category])\r\n    );\r\n  }),\r\n\r\n  includeCategory: action((state, category) => {\r\n    state.excludedCategories = state.excludedCategories.filter(\r\n      (_) => _ !== category\r\n    );\r\n  }),\r\n\r\n  resetExcludedCategories: action((state) => {\r\n    state.excludedCategories = [];\r\n  }),\r\n};\r\n","import { routes } from \"../Routes\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nexport type RouteSelector = (r: typeof routes) => string;\r\n\r\nexport function useRedirect() {\r\n  const history = useHistory();\r\n  return (path: string | RouteSelector) =>\r\n    history.push(typeof path === \"string\" ? path : path(routes));\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { LoginView } from './LoginView';\r\nimport * as yup from \"yup\"\r\nimport { useStoreActions, useStoreState } from '../../store';\r\nimport { useRedirect } from '../../hooks/useRedirect';\r\n\r\nexport const loginValidationSchema = yup.object({\r\n\temail: yup.string().defined().email(),\r\n\tpassword: yup.string().defined(),\r\n}).defined()\r\n\r\nexport type LoginFormType = yup.InferType<typeof loginValidationSchema>\r\n\r\nexport const Login: React.FC<{}> = () => {\r\n\r\n\tconst [error, setError] = useState<string>()\r\n\r\n\tconst redirect = useRedirect()\r\n\r\n\tconst user = useStoreState(_ => _.auth.user)\r\n\r\n\tconst loginWithGoogle = useStoreActions(_ => _.auth.loginWithGoogle)\r\n\tconst loginWithEmailPassword = useStoreActions(_ => _.auth.loginWithEmailPassword)\r\n\tconst requestConfirmationEmail = useStoreActions(_ => _.auth.requestConfirmationEmail)\r\n\r\n\t/**\r\n\t * Check initial login\r\n\t */\r\n\tuseEffect(() => {\r\n\t\tif (user) {\r\n\t\t\tredirect(routes => routes.dashboard)\r\n\t\t}\r\n\t}, [user, redirect])\r\n\r\n\tasync function handleSubmit(values: LoginFormType) {\r\n\t\tsetError(undefined)\r\n\r\n\t\tconst result = await loginWithEmailPassword(values)\r\n\t\tresult.onSuccess(() => redirect(routes => routes.dashboard))\r\n\r\n\t\tresult.onFailure(failure => {\r\n\t\t\tswitch (failure.code) {\r\n\t\t\t\tcase \"data/invalid-request-data\":\r\n\t\t\t\t\tsetError(\"Invalid email or password.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"auth/invalid-credentials\":\r\n\t\t\t\t\tsetError(\"Wrong password or the user does not have a password.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"auth/user-not-found\":\r\n\t\t\t\t\tsetError(\"No user exists with that email.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"auth/email-not-confirmed\":\r\n\t\t\t\t\tsetError(\"Confirm your email before logging in. We have sent you a new email confirmation link.\")\r\n\t\t\t\t\tif (user?.email) {\r\n\t\t\t\t\t\trequestConfirmationEmail({ email: user.email })\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"server/unavailable\":\r\n\t\t\t\t\tsetError(\"Could not contact server. Try again later.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.warn(\"Uncaught error code in login:\", failure)\r\n\t\t\t\t\tsetError(\"An error occured while logging in. Try again.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tasync function handleGoogleSubmit() {\r\n\t\tloginWithGoogle()\r\n\t}\r\n\r\n\tasync function handleForgotPassword() {\r\n\t\tredirect(_ => _.forgotPassword)\r\n\t}\r\n\r\n\tasync function handleCreateAccount() {\r\n\t\tredirect(_ => _.register)\r\n\t}\r\n\r\n\treturn <LoginView {...{\r\n\t\thandleGoogleSubmit,\r\n\t\thandleSubmit,\r\n\t\thandleForgotPassword,\r\n\t\thandleCreateAccount,\r\n\t\terror,\r\n\t}} />\r\n}","import \"./Register.scss\"\r\nimport React, { useState } from 'react';\r\nimport { useForm } from \"react-hook-form\"\r\nimport { registerValidationSchema, RegisterFormType } from './RegisterController';\r\nimport { yupResolver } from '@hookform/resolvers';\r\nimport { TextField, Button, InputAdornment, IconButton } from \"@material-ui/core\";\r\nimport {\r\n\tEmail as EmailIcon,\r\n\tVisibility as PasswordVisibleIcon,\r\n\tVisibilityOff as PasswordInvisibleIcon,\r\n} from \"@material-ui/icons\";\r\nimport { AuthFrame } from \"../../components/AuthFrame/AuthFrame\";\r\nimport { Type } from \"../../components/Type/Type\";\r\n\r\n\r\nexport type RegisterViewProps = {\r\n\thandleSubmit(values: RegisterFormType): Promise<void>;\r\n\thandleLogin(): Promise<void>;\r\n\terror?: string;\r\n\tregistered: boolean;\r\n}\r\n\r\nexport const RegisterView: React.FC<RegisterViewProps> = (props) => {\r\n\r\n\tconst [passwordVisible, setPasswordVisible] = useState(false)\r\n\r\n\tconst form = useForm<RegisterFormType>({\r\n\t\tresolver: yupResolver(registerValidationSchema),\r\n\t})\r\n\r\n\tconst emailError = form.formState.touched.email && form.errors.email?.message\r\n\tconst passwordError = form.formState.touched.password && form.errors.password?.message\r\n\r\n\treturn <div className=\"Register\">\r\n\r\n\t\t<AuthFrame\r\n\r\n\t\t\theader=\"Create account\"\r\n\r\n\t\t\tbody={\r\n\t\t\t\tprops.registered\r\n\t\t\t\t\t? <>\r\n\t\t\t\t\t\t<Type variant=\"h6\">\r\n\t\t\t\t\t\t\t{\"Succesfully registered.\"}\r\n\t\t\t\t\t\t</Type>\r\n\t\t\t\t\t\t<Type>\r\n\t\t\t\t\t\t\t{\"Check your email in order to confirm your email address. \"}\r\n\t\t\t\t\t\t\t{\"You can login after having confirmation.\"}\r\n\t\t\t\t\t\t</Type>\r\n\t\t\t\t\t</>\r\n\t\t\t\t\t: <form onSubmit={form.handleSubmit(props.handleSubmit)}>\r\n\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tid=\"register-email\"\r\n\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tinputRef={form.register}\r\n\t\t\t\t\t\t\tlabel=\"Email\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\terror={!!emailError}\r\n\t\t\t\t\t\t\thelperText={emailError}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t<EmailIcon />\r\n\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tid=\"register-password\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\ttype={passwordVisible ? \"text\" : \"password\"}\r\n\t\t\t\t\t\t\tinputRef={form.register}\r\n\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\terror={!!passwordError}\r\n\t\t\t\t\t\t\thelperText={passwordError}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t<IconButton onClick={() => setPasswordVisible(_ => !_)} size=\"small\">\r\n\t\t\t\t\t\t\t\t\t\t{passwordVisible ? <PasswordVisibleIcon /> : <PasswordInvisibleIcon />}\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</InputAdornment>,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\"Create account\"}\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprops.error\r\n\t\t\t\t\t\t\t\t? <Type color=\"error\">\r\n\t\t\t\t\t\t\t\t\t{props.error}\r\n\t\t\t\t\t\t\t\t</Type>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t</form >\r\n\t\t\t}\r\n\r\n\t\t\tfooter={\r\n\t\t\t\t<Button onClick={() => props.handleLogin()}>\r\n\t\t\t\t\t{\"Already have an account? Login\"}\r\n\t\t\t\t</Button>\r\n\t\t\t}\r\n\r\n\t\t/>\r\n\r\n\t</div>\r\n}","import React, { useState } from 'react';\r\nimport { RegisterView } from './RegisterView';\r\nimport { InferType, object, string } from \"yup\"\r\nimport { useStoreActions } from '../../store';\r\nimport { useRedirect } from '../../hooks/useRedirect';\r\n\r\nexport const registerValidationSchema = object({\r\n\temail: string().defined().max(255).email(),\r\n\tpassword: string().defined().min(6).max(255),\r\n}).defined()\r\n\r\nexport type RegisterFormType = InferType<typeof registerValidationSchema>\r\n\r\nexport const Register: React.FC<{}> = () => {\r\n\r\n\tconst [error, setError] = useState<string>()\r\n\r\n\tconst [registered, setRegistered] = useState(false)\r\n\r\n\tconst redirect = useRedirect()\r\n\r\n\tconst register = useStoreActions(_ => _.auth.registerWithEmailPassword)\r\n\r\n\tasync function handleSubmit(values: RegisterFormType) {\r\n\t\tsetError(undefined)\r\n\t\tconsole.log(\"Submit\")\r\n\t\tconst result = await register({ email: values.email, password: values.password })\r\n\t\tresult.onSuccess(() => setRegistered(true))\r\n\t\tresult.onFailure(failure => {\r\n\t\t\tswitch (failure.code) {\r\n\t\t\t\tcase \"data/invalid-request-data\":\r\n\t\t\t\t\tsetError(\"Invalid email or password.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"auth/user-already-exists\":\r\n\t\t\t\t\tsetError(\"An user already exists with that email.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"server/unavailable\":\r\n\t\t\t\t\tsetError(\"Could not contact server. Try again later.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.warn(\"Uncaught error code in login:\", failure)\r\n\t\t\t\t\tsetError(\"An error occured while logging in. Try again.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tasync function handleLogin() {\r\n\t\tredirect(_ => _.login)\r\n\t}\r\n\r\n\treturn <RegisterView\r\n\t\thandleSubmit={handleSubmit}\r\n\t\thandleLogin={handleLogin}\r\n\t\terror={error}\r\n\t\tregistered={registered}\r\n\t/>\r\n}","import React from \"react\";\r\nimport { Route, RouteProps, Redirect } from \"react-router-dom\";\r\nimport { useStoreState } from \"../../store\";\r\nimport { routes } from \"../../Routes\";\r\n\r\nexport type ProtectedRouteProps = {\r\n\tfallbackRoute?: string;\r\n} & RouteProps\r\n\r\nexport default function ProtectedRoute(props: ProtectedRouteProps) {\r\n\r\n\tconst { fallbackRoute, ...routeProps } = props\r\n\r\n\t/**\r\n\t * Default fallback to login on redirect\r\n\t */\r\n\tconst defaultFallbackRoute = routes.login\r\n\r\n\t/**\r\n\t * Get current user details\r\n\t */\r\n\tconst initialized = useStoreState(_ => _.auth.initialized)\r\n\tconst isLoggedIn = useStoreState(_ => _.auth.isLoggedIn)\r\n\r\n\t/**\r\n\t * If the user is being loaded, show nothing\r\n\t */\r\n\tif (!initialized) return null\r\n\r\n\t/**\r\n\t * Else if user is not logged in redirect to fallback route or default fallback route\r\n\t * if none specified in props\r\n\t */\r\n\telse if (!isLoggedIn) return <Redirect to={fallbackRoute || defaultFallbackRoute} />\r\n\r\n\t/**\r\n\t * Else return route as is\r\n\t */\r\n\telse return <Route {...routeProps} />\r\n}","import \"./TransactionListing.scss\";\r\nimport React from \"react\"\r\nimport cx from \"classnames\"\r\nimport { Transaction } from \"../../classes/Transaction\";\r\nimport { Plus as PlusIcon, Minus as MinusIcon } from \"react-feather\"\r\n\r\nexport type TransactionListingViewProps = {\r\n\ttransaction: Transaction;\r\n\thandleDelete: Function;\r\n}\r\n\r\nexport function TransactionListingView(props: TransactionListingViewProps) {\r\n\r\n\tconst signClass = props.transaction.amount.isPositive ? \"positive\" : \"negative\"\r\n\r\n\treturn <div className=\"TransactionListing\">\r\n\t\t<div className={cx(\"icon\", signClass)}>\r\n\t\t\t<div className=\"iconContainer\">\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.transaction.amount.isPositive\r\n\t\t\t\t\t\t? <PlusIcon />\r\n\t\t\t\t\t\t: <MinusIcon />\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div className=\"category\">\r\n\t\t\t<span>\r\n\t\t\t\t{props.transaction.category}\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t\t<div className=\"comment\">\r\n\t\t\t<span>\r\n\t\t\t\t{props.transaction.comment}\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t\t<div className={cx(\"amount\", signClass)}>\r\n\t\t\t<span>\r\n\t\t\t\t{props.transaction.amount.format()}\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t</div>\r\n}","import React, { useCallback } from \"react\"\r\nimport { TransactionListingView } from \"./TransactionListingView\"\r\nimport { Transaction } from \"../../classes/Transaction\"\r\nimport { useStoreActions } from \"../../store\"\r\n\r\nexport type TransactionListingProps = {\r\n\ttransaction: Transaction;\r\n}\r\n\r\nexport function TransactionListing(props: TransactionListingProps) {\r\n\r\n\tconst deleteTransaction = useStoreActions(_ => _.transactions.deleteTransaction)\r\n\r\n\tconst handleDelete = useCallback(() => {\r\n\t\tdeleteTransaction(props.transaction.id)\r\n\t}, [props.transaction, deleteTransaction])\r\n\r\n\treturn <TransactionListingView\r\n\t\ttransaction={props.transaction}\r\n\t\thandleDelete={handleDelete}\r\n\t/>\r\n}","import \"./TransactionList.scss\";\r\nimport React, { createRef, useEffect } from \"react\"\r\nimport { TransactionListing } from \"../TransactionListing/TransactionListing\";\r\nimport { Transaction } from \"../../classes/Transaction\";\r\nimport { format } from \"date-fns\"\r\nimport { AutoSizer, List } from \"react-virtualized\"\r\nimport { Type } from \"../Type/Type\";\r\n\r\nexport type TransactionListViewProps = {\r\n\titemsByDates: {\r\n\t\tdate: Date;\r\n\t\titems: Transaction[];\r\n\t}[]\r\n}\r\n\r\nexport function TransactionListView(props: TransactionListViewProps) {\r\n\r\n\t/**\r\n\t * Reference to virtualized list component for public methods\r\n\t */\r\n\tconst virtualizedListRef = createRef<List>()\r\n\r\n\t/**\r\n\t * Force virtualized list to recompute row heights each time\r\n\t * the props change\r\n\t */\r\n\tuseEffect(() => {\r\n\t\tvirtualizedListRef.current?.recomputeRowHeights()\r\n\t}, [props, virtualizedListRef])\r\n\r\n\treturn <div className=\"TransactionList\">\r\n\r\n\t\t<AutoSizer className=\"autoSizer\">\r\n\t\t\t{\r\n\t\t\t\t(autoSizer) => <List\r\n\t\t\t\t\tref={virtualizedListRef}\r\n\t\t\t\t\tclassName=\"virtualizedList\"\r\n\t\t\t\t\theight={autoSizer.height}\r\n\t\t\t\t\twidth={autoSizer.width}\r\n\t\t\t\t\trowCount={props.itemsByDates.length}\r\n\t\t\t\t\trowHeight={({ index }) => {\r\n\t\t\t\t\t\treturn props.itemsByDates[index].items.length * 68 + 48\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tnoRowsRenderer={() => {\r\n\t\t\t\t\t\treturn <Type>\r\n\t\t\t\t\t\t\t{\"No transactions\"}\r\n\t\t\t\t\t\t</Type>\r\n\t\t\t\t\t}}\r\n\t\t\t\t\trowRenderer={(rowProps) => {\r\n\t\t\t\t\t\tconst entry = props.itemsByDates[rowProps.index]\r\n\t\t\t\t\t\treturn <div className=\"dateGroup\" key={rowProps.key} style={rowProps.style}>\r\n\t\t\t\t\t\t\t<Type>\r\n\t\t\t\t\t\t\t\t{toDatestring(entry.date)}\r\n\t\t\t\t\t\t\t</Type>\r\n\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tentry.items.map(item => {\r\n\t\t\t\t\t\t\t\t\t\treturn <li key={item.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<TransactionListing transaction={item} />\r\n\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t}\r\n\t\t</AutoSizer>\r\n\r\n\t</div >\r\n}\r\n\r\nfunction toDatestring(date: Date) {\r\n\treturn date.getFullYear() === currentYear\r\n\t\t? format(date, \"dd.MM.\")\r\n\t\t: format(date, \"dd.MM.yyyy\")\r\n}\r\n\r\nconst currentYear = new Date().getFullYear()","import React from \"react\"\r\nimport { TransactionListView } from \"./TransactionListView\"\r\nimport { useStoreState } from \"../../store\"\r\n\r\nexport type TransactionListProps = {\r\n\tbypassFilters?: boolean;\r\n}\r\n\r\nexport function TransactionList(props: TransactionListProps) {\r\n\r\n\tconst itemsByDates = useStoreState(_ => _.transactions.itemsByDates)\r\n\r\n\tconst filteredItemsByDates = useStoreState(_ => _.transactions.filtered.itemsByDates)\r\n\r\n\treturn <TransactionListView\r\n\t\titemsByDates={props.bypassFilters ? itemsByDates : filteredItemsByDates}\r\n\t/>\r\n}","import \"./PageHeader.scss\";\r\nimport React from \"react\"\r\nimport textureImg from \"../../images/pexels-johannes-plenio-1103970.jpg\"\r\n\r\nexport type PageHeaderProps = {\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\nexport function PageHeader(props: PageHeaderProps) {\r\n\treturn <header className=\"PageHeader\">\r\n\t\t<img src={textureImg} alt=\"\" className=\"texture\" />\r\n\t\t{props.children}\r\n\t</header>\r\n}","import \"./MoneyType.scss\";\r\nimport React from \"react\"\r\nimport { MoneyAmount } from \"../../classes/MoneyAmount\";\r\nimport { Type, TypeProps } from \"../Type/Type\";\r\n\r\nexport type MoneyTypeProps = {\r\n\tamount: MoneyAmount;\r\n} & TypeProps\r\n\r\nexport function MoneyType(props: MoneyTypeProps) {\r\n\r\n\tconst { amount, ...typeProps } = props\r\n\r\n\treturn <span className=\"MoneyType\">\r\n\t\t<Type condensed {...typeProps} component=\"span\">\r\n\t\t\t{amount.format()}\r\n\t\t</Type>\r\n\t</span >\r\n}","import { useEffect, useState, useCallback, useMemo } from \"react\";\r\n\r\nexport function useMedia(query: string) {\r\n  /**\r\n   * Media query list from query\r\n   */\r\n  const mediaQueryList = useMemo(() => {\r\n    return window.matchMedia(query);\r\n  }, [query]);\r\n\r\n  /**\r\n   * Current value\r\n   */\r\n  const [value, setValue] = useState<boolean>(false);\r\n\r\n  /**\r\n   * Changehandler: sets the current value\r\n   */\r\n  const changeHandler = useCallback(() => {\r\n    setValue(mediaQueryList.matches);\r\n  }, [mediaQueryList]);\r\n\r\n  /**\r\n   * Listening to changes and cleanup\r\n   */\r\n  useEffect(() => {\r\n    changeHandler();\r\n    mediaQueryList.addEventListener(\"change\", changeHandler);\r\n    return () => {\r\n      mediaQueryList.removeEventListener(\"change\", changeHandler);\r\n    };\r\n  }, [mediaQueryList, changeHandler]);\r\n\r\n  /**\r\n   * Returning value\r\n   */\r\n  return value;\r\n}\r\n\r\n/**\r\n * (min-width: $px) media query hook wrapper\r\n */\r\nexport function useMinWidthMedia(minWidth: number) {\r\n  const query = `(min-width: ${minWidth}px)`;\r\n  return useMedia(query);\r\n}\r\n\r\n/**\r\n * (max-width: $px) media query hook wrapper\r\n */\r\nexport function useMaxWidthMedia(maxWidth: number) {\r\n  const query = `(max-width: ${maxWidth}px)`;\r\n  return useMedia(query);\r\n}\r\n\r\n/**\r\n * Responsive media queries for app breakpoints\r\n *\r\n * SM breakpoint at 600px\r\n */\r\nexport function useSmMedia() {\r\n  const query = `(min-width: 600px)`;\r\n  return useMedia(query);\r\n}\r\n\r\n/**\r\n * Responsive media queries for app breakpoints\r\n *\r\n * MD breakpoint at 900px\r\n */\r\nexport function useMdMedia() {\r\n  const query = `(min-width: 900px)`;\r\n  return useMedia(query);\r\n}\r\n\r\n/**\r\n * Responsive media queries for app breakpoints\r\n *\r\n * LG breakpoint at 1200px\r\n */\r\nexport function useLgMedia() {\r\n  const query = `(min-width: 1200px)`;\r\n  return useMedia(query);\r\n}\r\n","import \"./FiltersForm.scss\";\r\nimport React from \"react\"\r\nimport { Sort as FiltersIcon, Clear as ClearIcon } from \"@material-ui/icons\";\r\nimport { Button, TextField, InputAdornment, IconButton, Slider, Chip } from \"@material-ui/core\";\r\nimport { Type } from \"../Type/Type\";\r\n\r\nexport type FiltersFormViewProps = {\r\n\r\n\tonConfirm?(): void;\r\n\r\n\tonResetAll(): void;\r\n\r\n\tonResetSearchTerm(): void;\r\n\tonResetAmount(): void;\r\n\tonResetExcludedCategories(): void;\r\n\r\n\tcategories: string[];\r\n\r\n\tsearchTerm: string;\r\n\tminAmount: number;\r\n\tmaxAmount: number;\r\n\texcludedCategories: string[];\r\n\r\n\tsetSearchTerm(value: string): void;\r\n\tsetAmount(values: [number | undefined, number | undefined]): void;\r\n\texcludeCategory(value: string | string[]): void;\r\n\tincludeCategory(value: string): void;\r\n\r\n\tminPossibleAmount: number;\r\n\tmaxPossibleAmount: number;\r\n\r\n}\r\n\r\nexport function FiltersFormView(props: FiltersFormViewProps) {\r\n\treturn <div className=\"FiltersForm\">\r\n\r\n\t\t<header>\r\n\r\n\t\t\t<div className=\"title\">\r\n\t\t\t\t<Type variant=\"button\">\r\n\t\t\t\t\t{\"Filters\"}\r\n\t\t\t\t</Type>\r\n\t\t\t\t<FiltersIcon />\r\n\t\t\t</div>\r\n\r\n\t\t\t<Button\r\n\t\t\t\tvariant=\"text\"\r\n\t\t\t\tonClick={props.onResetAll}\r\n\t\t\t>\r\n\t\t\t\t{\"Reset all\"}\r\n\t\t\t</Button>\r\n\r\n\t\t</header>\r\n\r\n\t\t<section className=\"searchTerm\">\r\n\r\n\t\t\t<div className=\"sectionLabel\">\r\n\r\n\t\t\t\t<Type className=\"label\">\r\n\t\t\t\t\t{\"Search term\"}\r\n\t\t\t\t</Type>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<TextField\r\n\t\t\t\tvalue={props.searchTerm}\r\n\t\t\t\tonChange={e => props.setSearchTerm(e.target.value)}\r\n\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">\r\n\t\t\t\t\t\t<IconButton size=\"small\" onClick={props.onResetSearchTerm}>\r\n\t\t\t\t\t\t\t<ClearIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t</section>\r\n\r\n\t\t<section className=\"amount\">\r\n\r\n\t\t\t<div className=\"sectionLabel\">\r\n\r\n\t\t\t\t<Type className=\"label\">\r\n\t\t\t\t\t{\"Amount\"}\r\n\t\t\t\t</Type>\r\n\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\tonClick={props.onResetAmount}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\"Reset\"}\r\n\t\t\t\t</Button>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"sliderLabel\">\r\n\t\t\t\t<Type>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.minAmount <= props.minPossibleAmount\r\n\t\t\t\t\t\t\t? \"N/A\"\r\n\t\t\t\t\t\t\t: Math.floor(props.minAmount / 100) + \" \"\r\n\t\t\t\t\t}\r\n\t\t\t\t</Type>\r\n\t\t\t\t<Type>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tprops.maxAmount >= props.maxPossibleAmount\r\n\t\t\t\t\t\t\t? \"N/A\"\r\n\t\t\t\t\t\t\t: Math.ceil(props.maxAmount / 100) + \" \"\r\n\t\t\t\t\t}\r\n\t\t\t\t</Type>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"sliderContainer\">\r\n\r\n\t\t\t\t<Slider\r\n\t\t\t\t\tvalue={[Math.floor(props.minAmount / 100), Math.ceil(props.maxAmount / 100)]}\r\n\t\t\t\t\tonChange={(e, value) => Array.isArray(value) && value.length === 2\r\n\t\t\t\t\t\t? props.setAmount(value.map(_ => _ * 100) as [number, number])\r\n\t\t\t\t\t\t: console.error(\"Slider returned value which is not a numeric tuple:\", value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstep={1}\r\n\t\t\t\t\tmin={Math.floor(props.minPossibleAmount / 100)}\r\n\t\t\t\t\tmax={Math.ceil(props.maxPossibleAmount / 100)}\r\n\t\t\t\t\tmarks={[{ value: 0, label: \"0\" }]}\r\n\t\t\t\t\tvalueLabelDisplay=\"off\"\r\n\t\t\t\t/>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</section>\r\n\r\n\t\t<section className=\"category\">\r\n\r\n\t\t\t<div className=\"sectionLabel\">\r\n\r\n\t\t\t\t<Type className=\"label\">\r\n\t\t\t\t\t{\"Categories\"}\r\n\t\t\t\t</Type>\r\n\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\tonClick={props.onResetExcludedCategories}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\"Reset\"}\r\n\t\t\t\t</Button>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"categoryChips\">\r\n\r\n\t\t\t\t{props.categories.map(category => {\r\n\t\t\t\t\tconst excluded = props.excludedCategories.includes(category)\r\n\t\t\t\t\treturn <Chip\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tif (excluded) { props.includeCategory(category) }\r\n\t\t\t\t\t\t\telse { props.excludeCategory(category) }\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tcolor={excluded ? \"default\" : \"primary\"}\r\n\t\t\t\t\t\tlabel={category}\r\n\t\t\t\t\t/>\r\n\t\t\t\t})}\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"categoryActions\">\r\n\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\tonClick={props.onResetExcludedCategories}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\"Select all\"}\r\n\t\t\t\t</Button>\r\n\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\tonClick={() => props.excludeCategory(props.categories)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\"Deselect all\"}\r\n\t\t\t\t</Button>\r\n\r\n\t\t\t</div>\r\n\r\n\r\n\r\n\t\t</section>\r\n\r\n\t\t{\r\n\t\t\tprops.onConfirm === undefined ? null :\r\n\t\t\t\t<section className=\"ok\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tonClick={props.onConfirm}\r\n\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{\"Ok\"}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</section>\r\n\t\t}\r\n\r\n\r\n\t</div>\r\n}","import React from \"react\"\r\nimport { FiltersFormView } from \"./FiltersFormView\"\r\nimport { useStoreActions, useStoreState } from \"../../store\"\r\n\r\nexport type FiltersFormProps = {\r\n\r\n\tonConfirm?(): void;\r\n\r\n}\r\n\r\nexport function FiltersForm(props: FiltersFormProps) {\r\n\r\n\tconst resetAll = useStoreActions(_ => _.filters.resetAll)\r\n\r\n\tconst resetSearchTerm = useStoreActions(_ => _.filters.resetSearchTerm)\r\n\tconst resetAmount = useStoreActions(_ => _.filters.resetAmount)\r\n\tconst resetExcludedCategories = useStoreActions(_ => _.filters.resetExcludedCategories)\r\n\r\n\tconst categories = useStoreState(_ => _.transactions.categories)\r\n\r\n\tconst searchTerm = useStoreState(_ => _.filters.searchTerm)\r\n\tconst minAmount = useStoreState(_ => _.filters.minAmount)\r\n\tconst maxAmount = useStoreState(_ => _.filters.maxAmount)\r\n\tconst excludedCategories = useStoreState(_ => _.filters.excludedCategories)\r\n\r\n\tconst setSearchTerm = useStoreActions(_ => _.filters.setSearchTerm)\r\n\tconst setAmount = useStoreActions(_ => _.filters.setAmount)\r\n\tconst excludeCategory = useStoreActions(_ => _.filters.excludeCategory)\r\n\tconst includeCategory = useStoreActions(_ => _.filters.includeCategory)\r\n\r\n\tconst minPossibleAmount = useStoreState(_ => _.transactions.minimumAmount).value\r\n\tconst maxPossibleAmount = useStoreState(_ => _.transactions.maximumAmount).value\r\n\r\n\treturn <FiltersFormView\r\n\r\n\t\tonConfirm={props.onConfirm}\r\n\r\n\t\tonResetAll={() => {\r\n\t\t\tresetAll()\r\n\t\t\tif (props.onConfirm) props.onConfirm()\r\n\t\t}}\r\n\r\n\t\tonResetSearchTerm={() => resetSearchTerm()}\r\n\t\tonResetAmount={() => resetAmount()}\r\n\t\tonResetExcludedCategories={() => resetExcludedCategories()}\r\n\r\n\t\tcategories={categories}\r\n\r\n\t\tsearchTerm={searchTerm}\r\n\t\tminAmount={minAmount}\r\n\t\tmaxAmount={maxAmount}\r\n\t\texcludedCategories={excludedCategories}\r\n\r\n\t\tsetSearchTerm={value => setSearchTerm(value)}\r\n\t\tsetAmount={value => setAmount(value)}\r\n\t\texcludeCategory={value => excludeCategory(value)}\r\n\t\tincludeCategory={value => includeCategory(value)}\r\n\r\n\t\tminPossibleAmount={minPossibleAmount}\r\n\t\tmaxPossibleAmount={maxPossibleAmount}\r\n\r\n\t/>\r\n}","import \"./IntervalPickerForm.scss\";\r\nimport React from \"react\"\r\nimport { IconButton, Button, Divider } from \"@material-ui/core\";\r\nimport { ChevronLeft, ChevronRight, Today as CalendarIcon } from \"@material-ui/icons\";\r\nimport { DatePicker } from \"@material-ui/pickers\";\r\nimport { Type } from \"../Type/Type\";\r\nimport { MAXIMUM_DATE, MINIMUM_DATE } from \"../../constants\";\r\nimport { compareDate } from \"../../utils/compareDate/compareDate\";\r\n\r\nexport type IntervalPickerFormViewProps = {\r\n\tonConfirm?(): void;\r\n\r\n\tintervalString: string;\r\n\r\n\tisDay: boolean;\r\n\tisWeek: boolean;\r\n\tisMonth: boolean;\r\n\tisYear: boolean;\r\n\tisAll: boolean;\r\n\r\n\tonDay(): void;\r\n\tonWeek(): void;\r\n\tonMonth(): void;\r\n\tonYear(): void;\r\n\tonAll(): void;\r\n\r\n\tonPrevious(): void;\r\n\tonNext(): void;\r\n\r\n\tincludesToday: boolean;\r\n\r\n\tonNow(): void;\r\n\r\n\tstartDate: Date;\r\n\tendDate: Date;\r\n\r\n\tsetStartDate(value: Date): void;\r\n\tsetEndDate(value: Date): void;\r\n}\r\n\r\nexport function IntervalPickerFormView(props: IntervalPickerFormViewProps) {\r\n\treturn <div className=\"IntervalPickerForm\">\r\n\r\n\t\t<section className=\"title\">\r\n\r\n\t\t\t<div className=\"currentInterval\">\r\n\r\n\t\t\t\t<CalendarIcon />\r\n\r\n\t\t\t\t<Type>\r\n\t\t\t\t\t{props.intervalString}\r\n\t\t\t\t</Type>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"nextOrPreviousInterval\">\r\n\r\n\t\t\t\t<IconButton\r\n\t\t\t\t\tdisabled={props.isAll}\r\n\t\t\t\t\tonClick={props.onPrevious}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ChevronLeft />\r\n\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\tcolor={props.includesToday ? \"primary\" : \"default\"}\r\n\t\t\t\t\tonClick={props.onNow}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\"Now\"}\r\n\t\t\t\t</Button>\r\n\r\n\t\t\t\t<IconButton\r\n\t\t\t\t\tdisabled={props.isAll}\r\n\t\t\t\t\tonClick={props.onNext}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ChevronRight />\r\n\t\t\t\t</IconButton>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</section>\r\n\r\n\t\t<Divider />\r\n\r\n\t\t<section className=\"intervalLength\">\r\n\r\n\t\t\t<Button\r\n\t\t\t\tvariant=\"text\"\r\n\t\t\t\tcolor={props.isDay ? \"primary\" : \"default\"}\r\n\t\t\t\tonClick={props.onDay}\r\n\t\t\t>\r\n\t\t\t\t{\"Day\"}\r\n\t\t\t</Button>\r\n\r\n\t\t\t<Button\r\n\t\t\t\tvariant=\"text\"\r\n\t\t\t\tcolor={props.isWeek ? \"primary\" : \"default\"}\r\n\t\t\t\tonClick={props.onWeek}\r\n\t\t\t>\r\n\t\t\t\t{\"Week\"}\r\n\t\t\t</Button>\r\n\r\n\t\t\t<Button\r\n\t\t\t\tvariant=\"text\"\r\n\t\t\t\tcolor={props.isMonth ? \"primary\" : \"default\"}\r\n\t\t\t\tonClick={props.onMonth}\r\n\t\t\t>\r\n\t\t\t\t{\"Month\"}\r\n\t\t\t</Button>\r\n\r\n\t\t\t<Button\r\n\t\t\t\tvariant=\"text\"\r\n\t\t\t\tcolor={props.isYear ? \"primary\" : \"default\"}\r\n\t\t\t\tonClick={props.onYear}\r\n\t\t\t>\r\n\t\t\t\t{\"Year\"}\r\n\t\t\t</Button>\r\n\r\n\t\t\t<Button\r\n\t\t\t\tvariant=\"text\"\r\n\t\t\t\tcolor={props.isAll ? \"primary\" : \"default\"}\r\n\t\t\t\tonClick={props.onAll}\r\n\t\t\t>\r\n\t\t\t\t{\"All\"}\r\n\t\t\t</Button>\r\n\r\n\t\t</section>\r\n\r\n\t\t<section className=\"dateSection\">\r\n\r\n\t\t\t<DatePicker\r\n\t\t\t\tvalue={compareDate(props.startDate, \"==\", MINIMUM_DATE) ? null : props.startDate}\r\n\t\t\t\tonChange={d => props.setStartDate(d as Date)}\r\n\t\t\t\tformat=\"dd/MM/yyyy\"\r\n\t\t\t\tinputVariant=\"outlined\"\r\n\t\t\t\tvariant=\"inline\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tlabel=\"From\"\r\n\t\t\t\tfullWidth\r\n\t\t\t/>\r\n\r\n\t\t</section>\r\n\r\n\t\t<section className=\"dateSection\">\r\n\r\n\t\t\t<DatePicker\r\n\t\t\t\tvalue={compareDate(props.endDate, \"==\", MAXIMUM_DATE) ? null : props.endDate}\r\n\t\t\t\tonChange={d => props.setEndDate(d as Date)}\r\n\t\t\t\tformat=\"dd/MM/yyyy\"\r\n\t\t\t\tinputVariant=\"outlined\"\r\n\t\t\t\tvariant=\"inline\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tlabel=\"To\"\r\n\t\t\t\tfullWidth\r\n\t\t\t/>\r\n\r\n\t\t</section>\r\n\r\n\t\t{\r\n\t\t\tprops.onConfirm && <Button\r\n\t\t\t\tcolor=\"primary\"\r\n\t\t\t\tvariant=\"contained\"\r\n\t\t\t\tfullWidth\r\n\t\t\t\tonClick={props.onConfirm}\r\n\t\t\t>\r\n\t\t\t\t{\"Ok\"}\r\n\t\t\t</Button>\r\n\t\t}\r\n\r\n\t</div>\r\n}","import React from \"react\"\r\nimport { IntervalPickerFormView } from \"./IntervalPickerFormView\"\r\nimport { useStoreState, useStoreActions } from \"../../store\"\r\n\r\nexport type IntervalPickerFormProps = {\r\n\tonConfirm?(): void;\r\n}\r\n\r\nexport function IntervalPickerForm(props: IntervalPickerFormProps) {\r\n\r\n\tconst intervalString = useStoreState(_ => _.interval.smartDisplayString)\r\n\r\n\tconst isDay = useStoreState(_ => _.interval.isDay)\r\n\tconst isWeek = useStoreState(_ => _.interval.isWeek)\r\n\tconst isMonth = useStoreState(_ => _.interval.isMonth)\r\n\tconst isYear = useStoreState(_ => _.interval.isYear)\r\n\tconst isAll = useStoreState(_ => _.interval.isAll)\r\n\r\n\tconst toDay = useStoreActions(_ => _.interval.dayInterval)\r\n\tconst toWeek = useStoreActions(_ => _.interval.weekInterval)\r\n\tconst toMonth = useStoreActions(_ => _.interval.monthInterval)\r\n\tconst toYear = useStoreActions(_ => _.interval.yearInterval)\r\n\tconst toAll = useStoreActions(_ => _.interval.allInterval)\r\n\r\n\tconst previous = useStoreActions(_ => _.interval.previousInterval)\r\n\tconst next = useStoreActions(_ => _.interval.nextInterval)\r\n\r\n\tconst now = useStoreActions(_ => _.interval.now)\r\n\r\n\tconst includesToday = useStoreState(_ => _.interval.includesToday)\r\n\r\n\tconst startDate = useStoreState(_ => _.interval.startDate)\r\n\tconst endDate = useStoreState(_ => _.interval.endDate)\r\n\r\n\tconst setStartDate = useStoreActions(_ => _.interval.setStartDate)\r\n\tconst setEndDate = useStoreActions(_ => _.interval.setEndDate)\r\n\r\n\treturn <IntervalPickerFormView\r\n\r\n\t\tonConfirm={props.onConfirm}\r\n\r\n\t\tintervalString={intervalString}\r\n\r\n\t\tisDay={isDay}\r\n\t\tisWeek={isWeek}\r\n\t\tisMonth={isMonth}\r\n\t\tisYear={isYear}\r\n\t\tisAll={isAll}\r\n\r\n\t\tonDay={() => toDay()}\r\n\t\tonWeek={() => toWeek()}\r\n\t\tonMonth={() => toMonth()}\r\n\t\tonYear={() => toYear()}\r\n\t\tonAll={() => toAll()}\r\n\r\n\t\tonPrevious={() => previous()}\r\n\t\tonNext={() => next()}\r\n\r\n\t\tonNow={() => now()}\r\n\r\n\t\tincludesToday={includesToday}\r\n\r\n\t\tstartDate={startDate}\r\n\t\tendDate={endDate}\r\n\t\tsetStartDate={setStartDate}\r\n\t\tsetEndDate={setEndDate}\r\n\r\n\t/>\r\n}","import \"./FiltersPanel.scss\";\r\nimport React, { useState } from \"react\"\r\nimport { Today as CalendarIcon, Sort as FilterIcon, ChevronLeft, ChevronRight } from \"@material-ui/icons\"\r\nimport { Button, Drawer, IconButton, Menu, } from \"@material-ui/core\";\r\nimport { useLgMedia, useMdMedia } from \"../../hooks/useMedia\";\r\nimport { FiltersForm } from \"../FiltersForm/FiltersFormController\";\r\nimport { IntervalPickerForm } from \"../IntervalPickerForm/IntervalPickerFormController\";\r\n\r\nexport type FiltersPanelViewProps = {\r\n\tintervalString: string;\r\n\r\n\tisDay: boolean;\r\n\tisWeek: boolean;\r\n\tisMonth: boolean;\r\n\tisYear: boolean;\r\n\tisAll: boolean;\r\n\r\n\tonDay(): void;\r\n\tonWeek(): void;\r\n\tonMonth(): void;\r\n\tonYear(): void;\r\n\tonAll(): void;\r\n\r\n\tonPrevious(): void;\r\n\tonNext(): void;\r\n\r\n\tincludesToday: boolean;\r\n\tonNow(): void;\r\n}\r\n\r\nexport function FiltersPanelView(props: FiltersPanelViewProps) {\r\n\r\n\tconst [filtersFormDrawerOpen, setFiltersFormDrawerOpen] = useState(false)\r\n\r\n\tconst [intervalPickerMenuAnchor, setIntervalPickerMenuAnchor] = useState<HTMLElement>()\r\n\r\n\tconst mediumScreen = useMdMedia()\r\n\r\n\tconst largeScreen = useLgMedia()\r\n\r\n\treturn <>\r\n\r\n\t\t<Drawer\r\n\t\t\topen={filtersFormDrawerOpen}\r\n\t\t\tonClose={() => setFiltersFormDrawerOpen(false)}\r\n\t\t\tanchor={largeScreen ? \"right\" : \"bottom\"}\r\n\t\t>\r\n\t\t\t<div className=\"FiltersPanel_filtersFormDrawer\">\r\n\t\t\t\t<FiltersForm\r\n\t\t\t\t\tonConfirm={() => setFiltersFormDrawerOpen(false)}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</Drawer>\r\n\r\n\t\t{\r\n\t\t\t/**\r\n\t\t\t * Render interval picker menu inside menu component\r\n\t\t\t * on larger screens and bottom drawer on smaller screens.\r\n\t\t\t */\r\n\t\t\tmediumScreen\r\n\t\t\t\t? <Menu\r\n\t\t\t\t\topen={!!intervalPickerMenuAnchor}\r\n\t\t\t\t\tonClose={() => setIntervalPickerMenuAnchor(undefined)}\r\n\t\t\t\t\tanchorEl={intervalPickerMenuAnchor}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"FiltersPanel_intervalPickerMenu\">\r\n\t\t\t\t\t\t<IntervalPickerForm\r\n\t\t\t\t\t\t\tonConfirm={() => setIntervalPickerMenuAnchor(undefined)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Menu>\r\n\t\t\t\t: <Drawer\r\n\t\t\t\t\topen={!!intervalPickerMenuAnchor}\r\n\t\t\t\t\tonClose={() => setIntervalPickerMenuAnchor(undefined)}\r\n\t\t\t\t\tanchor=\"bottom\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"FiltersPanel_intervalPickerDrawer\">\r\n\t\t\t\t\t\t<IntervalPickerForm\r\n\t\t\t\t\t\t\tonConfirm={() => setIntervalPickerMenuAnchor(undefined)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Drawer>\r\n\t\t}\r\n\r\n\r\n\r\n\t\t<div className=\"FiltersPanel\">\r\n\r\n\t\t\t<div className=\"floatLeft\">\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\tstartIcon={<CalendarIcon />}\r\n\t\t\t\t\tonClick={e => setIntervalPickerMenuAnchor(e.currentTarget)}\r\n\t\t\t\t>\r\n\t\t\t\t\t{props.intervalString}\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"floatRight\">\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tlargeScreen &&\r\n\t\t\t\t\t<div className=\"intervalLength\">\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tdisabled={props.isAll}\r\n\t\t\t\t\t\t\tonClick={props.onPrevious}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ChevronLeft />\r\n\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\tcolor={props.includesToday ? \"primary\" : \"default\"}\r\n\t\t\t\t\t\t\tonClick={props.onNow}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\"Now\"}\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tdisabled={props.isAll}\r\n\t\t\t\t\t\t\tonClick={props.onNext}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ChevronRight />\r\n\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\tcolor={props.isDay ? \"primary\" : \"default\"}\r\n\t\t\t\t\t\t\tonClick={props.onDay}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\"Day\"}\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\tcolor={props.isWeek ? \"primary\" : \"default\"}\r\n\t\t\t\t\t\t\tonClick={props.onWeek}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\"Week\"}\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\tcolor={props.isMonth ? \"primary\" : \"default\"}\r\n\t\t\t\t\t\t\tonClick={props.onMonth}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\"Month\"}\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\tcolor={props.isYear ? \"primary\" : \"default\"}\r\n\t\t\t\t\t\t\tonClick={props.onYear}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\"Year\"}\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\tcolor={props.isAll ? \"primary\" : \"default\"}\r\n\t\t\t\t\t\t\tonClick={props.onAll}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\"All\"}\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t<div className=\"filtersButton\">\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant={largeScreen ? \"outlined\" : \"text\"}\r\n\t\t\t\t\t\tendIcon={<FilterIcon />}\r\n\t\t\t\t\t\tonClick={() => setFiltersFormDrawerOpen(true)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{\"Filters\"}\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\r\n\t</>\r\n}","import React from \"react\"\r\nimport { FiltersPanelView } from \"./FiltersPanelView\"\r\nimport { useStoreState, useStoreActions } from \"../../store\"\r\n\r\nexport type FiltersPanelProps = {\r\n}\r\n\r\nexport function FiltersPanel(props: FiltersPanelProps) {\r\n\r\n\tconst intervalString = useStoreState(_ => _.interval.smartDisplayString)\r\n\r\n\tconst isDay = useStoreState(_ => _.interval.isDay)\r\n\tconst isWeek = useStoreState(_ => _.interval.isWeek)\r\n\tconst isMonth = useStoreState(_ => _.interval.isMonth)\r\n\tconst isYear = useStoreState(_ => _.interval.isYear)\r\n\tconst isAll = useStoreState(_ => _.interval.isAll)\r\n\r\n\tconst toDay = useStoreActions(_ => _.interval.dayInterval)\r\n\tconst toWeek = useStoreActions(_ => _.interval.weekInterval)\r\n\tconst toMonth = useStoreActions(_ => _.interval.monthInterval)\r\n\tconst toYear = useStoreActions(_ => _.interval.yearInterval)\r\n\tconst toAll = useStoreActions(_ => _.interval.allInterval)\r\n\r\n\tconst previous = useStoreActions(_ => _.interval.previousInterval)\r\n\tconst next = useStoreActions(_ => _.interval.nextInterval)\r\n\r\n\tconst now = useStoreActions(_ => _.interval.now)\r\n\r\n\tconst includesToday = useStoreState(_ => _.interval.includesToday)\r\n\r\n\treturn <FiltersPanelView\r\n\r\n\t\tintervalString={intervalString}\r\n\r\n\t\tisDay={isDay}\r\n\t\tisWeek={isWeek}\r\n\t\tisMonth={isMonth}\r\n\t\tisYear={isYear}\r\n\t\tisAll={isAll}\r\n\r\n\t\tonDay={() => toDay()}\r\n\t\tonWeek={() => toWeek()}\r\n\t\tonMonth={() => toMonth()}\r\n\t\tonYear={() => toYear()}\r\n\t\tonAll={() => toAll()}\r\n\r\n\t\tonPrevious={() => previous()}\r\n\t\tonNext={() => next()}\r\n\r\n\t\tonNow={() => now()}\r\n\r\n\t\tincludesToday={includesToday}\r\n\r\n\t/>\r\n}","import \"./Dashboard.scss\"\r\nimport React from \"react\";\r\nimport { TransactionList } from \"../../components/TransactionList/TransactionListController\";\r\nimport { Auth } from \"../../classes/Auth\";\r\nimport { MoneyAmount } from \"../../classes/MoneyAmount\";\r\nimport { PageHeader } from \"../../components/PageHeader/PageHeader\";\r\nimport { MoneyType } from \"../../components/MoneyType/MoneyType\";\r\nimport { FiltersPanel } from \"../../components/FiltersPanel/FiltersPanelController\";\r\n\r\nexport type DashboardViewProps = {\r\n\tuser: Auth;\r\n\tintervalString: string;\r\n\r\n\tfilteredSum: MoneyAmount;\r\n\tfilteredIncomesSum: MoneyAmount;\r\n\tfilteredExpensesSum: MoneyAmount;\r\n}\r\n\r\nexport function DashboardView(props: DashboardViewProps) {\r\n\r\n\treturn <div className=\"Dashboard\">\r\n\r\n\t\t<PageHeader>\r\n\r\n\t\t\t<div className=\"totals\">\r\n\r\n\t\t\t\t<MoneyType\r\n\t\t\t\t\tamount={props.filteredSum}\r\n\t\t\t\t\tvariant=\"h4\"\r\n\t\t\t\t/>\r\n\r\n\t\t\t</div>\r\n\r\n\t\t</PageHeader>\r\n\r\n\t\t<section className=\"filtersPanel\">\r\n\r\n\t\t\t<FiltersPanel />\r\n\r\n\t\t</section>\r\n\r\n\t\t<section className=\"transactionsList\">\r\n\r\n\t\t\t<TransactionList />\r\n\r\n\t\t</section>\r\n\r\n\t</div>\r\n\r\n}","import React from \"react\"\r\nimport { DashboardView } from \"./DashboardView\"\r\nimport { useStoreState } from \"../../store\";\r\n\r\nexport function Dashboard() {\r\n\r\n\tconst user = useStoreState(_ => _.auth.user)\r\n\r\n\tconst smartDisplayString = useStoreState(_ => _.interval.smartDisplayString)\r\n\r\n\tconst filteredSums = useStoreState(_ => _.transactions.filtered.sums)\r\n\r\n\tif (!user) return null\r\n\r\n\treturn <DashboardView\r\n\r\n\t\tintervalString={smartDisplayString}\r\n\r\n\t\tfilteredSum={filteredSums.all}\r\n\t\tfilteredIncomesSum={filteredSums.incomes}\r\n\t\tfilteredExpensesSum={filteredSums.expenses}\r\n\r\n\t\tuser={user}\r\n\r\n\t/>\r\n}","import { Failure, Result, Success } from \"../Result/Result\";\r\n\r\nexport type ReadFileAsTextFailureType =\r\n  | null\r\n  | ArrayBuffer\r\n  | ProgressEvent<FileReader>;\r\n\r\nexport type ReadFileAsTextResult = Result<string, ReadFileAsTextFailureType>;\r\n\r\nexport async function readFileAsText(fileInputElement: HTMLInputElement) {\r\n  return new Promise<ReadFileAsTextResult>((resolve) => {\r\n    const file = fileInputElement.files ? fileInputElement.files[0] : undefined;\r\n\r\n    if (!file) return undefined;\r\n\r\n    const reader = new FileReader();\r\n\r\n    reader.onerror = (error) => {\r\n      resolve(\r\n        new Failure(error, {\r\n          code: \"read-file-as-text/file-reader-error\",\r\n          message: \"File reader error\",\r\n          status: 10,\r\n        })\r\n      );\r\n    };\r\n\r\n    reader.onabort = () => {\r\n      resolve(\r\n        new Failure(null, {\r\n          code: \"read-file-as-text/aborted\",\r\n          message: \"File read aborted\",\r\n          status: 10,\r\n        })\r\n      );\r\n    };\r\n\r\n    reader.onload = (event) => {\r\n      if (typeof event.target?.result === \"string\") {\r\n        resolve(new Success(event.target.result));\r\n      } else if (!event.target) {\r\n        resolve(\r\n          new Failure(event.target, {\r\n            code: \"read-file-as-text/no-reader-event-target\",\r\n            message: \"Reader did not provide a target\",\r\n            status: 10,\r\n          })\r\n        );\r\n      } else {\r\n        resolve(\r\n          new Failure(event.target.result, {\r\n            code: \"read-file-as-text/invalid-type\",\r\n            message: \"Reader target result of invalid type\",\r\n            status: 10,\r\n          })\r\n        );\r\n      }\r\n    };\r\n\r\n    reader.readAsText(file);\r\n  });\r\n}\r\n","import { Failure, Result } from \"../Result/Result\";\r\nimport { JsonTransaction } from \"../../classes/Transaction\";\r\nimport XLSX from \"xlsx\";\r\nimport {\r\n  readFileAsText,\r\n  ReadFileAsTextFailureType,\r\n} from \"../readFileAsText/readFileAsText\";\r\n\r\nexport type ReadFileAsJsonTransactionsFailureType =\r\n  | (Error | undefined)\r\n  | ReadFileAsTextFailureType;\r\n\r\nexport type ReadFileAsJsonTransactionsResult = Result<\r\n  JsonTransaction[],\r\n  ReadFileAsJsonTransactionsFailureType\r\n>;\r\n\r\nexport async function readFileAsJsonTransactions(\r\n  fileInputElement: HTMLInputElement\r\n): Promise<ReadFileAsJsonTransactionsResult> {\r\n  try {\r\n    const raw = await readFileAsText(fileInputElement);\r\n\r\n    if (raw.isFailure()) {\r\n      return new Failure<\r\n        JsonTransaction[],\r\n        ReadFileAsJsonTransactionsFailureType\r\n      >(raw.value, raw.details);\r\n    }\r\n\r\n    const workbook = XLSX.read(raw);\r\n\r\n    console.log(workbook);\r\n\r\n    return Failure.Unimplemented<JsonTransaction[]>();\r\n  } catch (e) {\r\n    if (e instanceof Error) {\r\n      return Failure.Error<JsonTransaction[]>(e);\r\n    } else {\r\n      return Failure.Unknown<JsonTransaction[]>();\r\n    }\r\n  }\r\n}\r\n","import \"./Settings.scss\";\r\nimport React from \"react\"\r\nimport { Auth } from \"../../classes/Auth\";\r\nimport { readFileAsJsonTransactions } from \"../../utils/xlsx/xlsx\";\r\n\r\nexport type SettingsViewProps = {\r\n\tuser: Auth;\r\n\thandleLogout(): void;\r\n}\r\n\r\nexport function SettingsView(props: SettingsViewProps) {\r\n\r\n\tfunction fileUploadHandler(e: React.ChangeEvent<HTMLInputElement>) {\r\n\t\treadFileAsJsonTransactions(e.target).then(result => {\r\n\t\t\tresult\r\n\t\t\t\t.onSuccess((value) => {\r\n\t\t\t\t\tconsole.log(\"Success:\", value)\r\n\t\t\t\t})\r\n\t\t\t\t.onFailure((value) => {\r\n\t\t\t\t\tconsole.log(\"Failure:\", value)\r\n\t\t\t\t})\r\n\t\t})\r\n\t}\r\n\r\n\r\n\treturn <div className=\"Settings\">\r\n\r\n\t\t{\r\n\t\t\tprops.user.photoUrl ? <img style={{ width: 64, height: 64 }} alt=\"profile\" src={props.user.photoUrl} /> : null\r\n\t\t}\r\n\r\n\t\t<table>\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>Display name</td>\r\n\t\t\t\t\t<td>{props.user.displayName}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>Email</td>\r\n\t\t\t\t\t<td>{props.user.email}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>ID</td>\r\n\t\t\t\t\t<td>{props.user.id}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td>Google ID</td>\r\n\t\t\t\t\t<td>{props.user.googleId}</td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\r\n\t\t<div>\r\n\t\t\t<button onClick={props.handleLogout}>Log out</button>\r\n\t\t</div>\r\n\r\n\t\t<div>\r\n\t\t\t<label>Import data from Excel</label>\r\n\t\t\t<input type=\"file\" onChange={fileUploadHandler} />\r\n\t\t</div>\r\n\r\n\t\t<div>\r\n\t\t\t<button>Export data</button>\r\n\t\t</div>\r\n\r\n\t</div>\r\n}","import React from \"react\"\r\nimport { SettingsView } from \"./SettingsView\"\r\nimport { useStoreState, useStoreActions } from \"../../store\"\r\nimport { useRedirect } from \"../../hooks/useRedirect\"\r\n\r\nexport type SettingsProps = {\r\n\r\n}\r\n\r\nexport function Settings(props: SettingsProps) {\r\n\tconst user = useStoreState(_ => _.auth.user)\r\n\tconst logout = useStoreActions(_ => _.auth.logout)\r\n\r\n\tconst redirect = useRedirect()\r\n\r\n\tasync function handleLogout() {\r\n\t\tconst result = await logout()\r\n\t\tresult.onSuccess(() => {\r\n\t\t\tredirect(_ => _.login)\r\n\t\t})\r\n\t}\r\n\r\n\tif (!user) return null\r\n\r\n\treturn <SettingsView\r\n\t\tuser={user}\r\n\t\thandleLogout={handleLogout}\r\n\t/>\r\n}","import \"./Analytics.scss\";\r\nimport React from \"react\"\r\nimport { useStoreActions } from \"../../store\";\r\n\r\nexport type AnalyticsViewProps = {\r\n\r\n}\r\n\r\nexport function AnalyticsView(props: AnalyticsViewProps) {\r\n\r\n\tconst postTransaction = useStoreActions(_ => _.transactions.postTransaction)\r\n\r\n\tfunction handleChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n\r\n\t\tconsole.log(\"Handling change\")\r\n\r\n\t\tif (!e.target.files) throw new Error(\"No files array\")\r\n\r\n\t\tconst file = e.target.files[0]\r\n\r\n\t\tif (!file) throw new Error(\"No file\")\r\n\r\n\t\tconst reader = new FileReader();\r\n\r\n\t\treader.addEventListener('load', function (e) {\r\n\r\n\t\t\tif (!e.target) throw new Error(\"No load event target\")\r\n\r\n\t\t\tif (!e.target.result) throw new Error(\"Load event target result is null\")\r\n\r\n\t\t\tconst csvData = e.target.result.toString()\r\n\r\n\t\t\t// const result: Transaction[] = []\r\n\r\n\t\t\tconst rows = csvData.split(\"\\n\")\r\n\r\n\t\t\tfor (const row of rows) {\r\n\r\n\t\t\t\tif (row) {\r\n\r\n\t\t\t\t\tconst values = row.split(\";\")\r\n\r\n\t\t\t\t\tpostTransaction({\r\n\t\t\t\t\t\tcategory: values[1],\r\n\t\t\t\t\t\tcomment: values[3],\r\n\t\t\t\t\t\tintegerAmount: Number(values[2].replace(/[^\\d-]/g, '')),\r\n\t\t\t\t\t\ttime: new Date(values[0].split(\".\").reverse().map(_ => _.padStart(2, \"0\")).join(\"-\")).getTime(),\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t})\r\n\r\n\t\treader.readAsText(file)\r\n\r\n\t}\r\n\r\n\treturn <div className=\"Analytics\">\r\n\r\n\t\t<input type=\"file\" accept=\".csv\" onChange={handleChange} />\r\n\r\n\t</div>\r\n}","import React from \"react\"\r\nimport { AnalyticsView } from \"./AnalyticsView\"\r\n\r\nexport type AnalyticsProps = {\r\n\r\n}\r\n\r\nexport function Analytics(props: AnalyticsProps) {\r\n\treturn <AnalyticsView />\r\n}","import \"./ForgotPassword.scss\";\r\nimport React from \"react\"\r\nimport { ForgotPasswordFormType, forgotPasswordValidationSchema } from \"./ForgotPasswordController\";\r\nimport { TextField, Button, InputAdornment } from \"@material-ui/core\";\r\nimport { Email as EmailIcon } from \"@material-ui/icons\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from \"@hookform/resolvers\";\r\nimport { AuthFrame } from \"../../components/AuthFrame/AuthFrame\";\r\nimport { Type } from \"../../components/Type/Type\";\r\n\r\nexport type ForgotPasswordViewProps = {\r\n\thandleSubmit(values: ForgotPasswordFormType): Promise<void>;\r\n\thandleGoogleSubmit(): Promise<void>;\r\n\thandleLogin(): Promise<void>;\r\n\thandleCreateAccount(): Promise<void>;\r\n\tsuccess: boolean;\r\n\terror?: string;\r\n}\r\n\r\nexport function ForgotPasswordView(props: ForgotPasswordViewProps) {\r\n\r\n\t/**\r\n\t * React hook form\r\n\t */\r\n\tconst { register, handleSubmit, errors, formState, ...form } = useForm<ForgotPasswordFormType>({\r\n\t\tresolver: yupResolver(forgotPasswordValidationSchema),\r\n\t})\r\n\r\n\t/**\r\n\t * Email and password error shorthands for react hook form\r\n\t */\r\n\tconst emailError = formState.touched.email && errors.email?.message\r\n\r\n\treturn <div className=\"ForgotPassword\">\r\n\r\n\t\t<AuthFrame\r\n\r\n\t\t\theader=\"Forgot password\"\r\n\r\n\t\t\tbody={\r\n\t\t\t\tprops.success\r\n\t\t\t\t\t? <Type>\r\n\t\t\t\t\t\t{\"Recovery email sent. Check your email.\"}\r\n\t\t\t\t\t</Type>\r\n\t\t\t\t\t: <form noValidate onSubmit={handleSubmit(props.handleSubmit)}>\r\n\r\n\t\t\t\t\t\t<Type>\r\n\t\t\t\t\t\t\t{\"Enter your email below and we will send you an email containing a link, which you can use to change your password.\"}\r\n\t\t\t\t\t\t</Type>\r\n\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tid=\"login-email\"\r\n\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tinputRef={register}\r\n\t\t\t\t\t\t\tlabel=\"Email\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\terror={!!emailError}\r\n\t\t\t\t\t\t\thelperText={emailError}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t<EmailIcon />\r\n\t\t\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\"Send recovery email\"}\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprops.error\r\n\t\t\t\t\t\t\t\t? <Type color=\"error\">\r\n\t\t\t\t\t\t\t\t\t{props.error}\r\n\t\t\t\t\t\t\t\t</Type>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t</form >\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfooter={\r\n\t\t\t\t<Button onClick={() => props.handleLogin()}>\r\n\t\t\t\t\t{\"Back\"}\r\n\t\t\t\t</Button>}\r\n\r\n\t\t/>\r\n\r\n\t</div >\r\n}","import React, { useState } from \"react\"\r\nimport { ForgotPasswordView } from \"./ForgotPasswordView\"\r\nimport * as yup from \"yup\";\r\nimport { useStoreActions } from \"../../store\";\r\nimport { useRedirect } from \"../../hooks/useRedirect\";\r\n\r\nexport const forgotPasswordValidationSchema = yup.object({\r\n\temail: yup.string().defined().min(3).max(255).email(),\r\n}).defined()\r\n\r\nexport type ForgotPasswordFormType = yup.InferType<typeof forgotPasswordValidationSchema>\r\n\r\nexport type ForgotPasswordProps = {\r\n\r\n}\r\n\r\nexport function ForgotPassword(props: ForgotPasswordProps) {\r\n\r\n\tconst [error, setError] = useState<string>()\r\n\r\n\tconst [success, setSuccess] = useState<boolean>(false)\r\n\r\n\tconst redirect = useRedirect()\r\n\r\n\tconst forgotPassword = useStoreActions(_ => _.auth.forgotPassword)\r\n\tconst loginWithGoogle = useStoreActions(_ => _.auth.loginWithGoogle)\r\n\r\n\tasync function handleSubmit(values: ForgotPasswordFormType) {\r\n\t\tsetError(undefined)\r\n\t\tconst result = await forgotPassword(values)\r\n\t\tresult.onSuccess(() => setSuccess(true))\r\n\t\tresult.onFailure(failure => {\r\n\t\t\tswitch (failure.code) {\r\n\t\t\t\tcase \"data/invalid-request-data\":\r\n\t\t\t\t\tsetError(\"Invalid email or password.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"auth/invalid-credentials\":\r\n\t\t\t\t\tsetError(\"Wrong password or the user does not have a password.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"auth/user-not-found\":\r\n\t\t\t\t\tsetError(\"No user exists with that email.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"server/unavailable\":\r\n\t\t\t\t\tsetError(\"Could not contact server. Try again later.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tconsole.warn(\"Uncaught error code in login:\", failure)\r\n\t\t\t\t\tsetError(\"An error occured while logging in. Try again.\")\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tasync function handleLogin() {\r\n\t\tredirect(_ => _.login)\r\n\t}\r\n\r\n\tasync function handleCreateAccount() {\r\n\t\tredirect(_ => _.register)\r\n\t}\r\n\r\n\tasync function handleGoogleSubmit() {\r\n\t\tloginWithGoogle()\r\n\t}\r\n\r\n\treturn <ForgotPasswordView {...{\r\n\t\thandleSubmit,\r\n\t\thandleCreateAccount,\r\n\t\thandleGoogleSubmit,\r\n\t\thandleLogin,\r\n\t\tsuccess,\r\n\t\terror\r\n\t}} />\r\n}","import \"./TransactionForm.scss\";\r\nimport React from \"react\"\r\nimport { TextField, InputAdornment, Button } from \"@material-ui/core\";\r\nimport { KeyboardDatePicker } from \"@material-ui/pickers\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\nimport { Type } from \"../Type/Type\";\r\n\r\nexport type TransactionFormViewProps = {\r\n\r\n\tonSubmit(): Promise<void>;\r\n\r\n\t/**\r\n\t * Form state\r\n\t */\r\n\tamount: string;\r\n\tcategory: string;\r\n\ttime: Date;\r\n\tcomment: string;\r\n\r\n\t/**\r\n\t * Form change handlers\r\n\t */\r\n\tonAmountChange(value: string): void;\r\n\tonCategoryChange(value: string): void;\r\n\tonTimeChange(value: Date): void;\r\n\tonCommentChange(value: string): void;\r\n\r\n\t/**\r\n\t * Form errors\r\n\t */\r\n\terrors: {\r\n\t\tmain?: string;\r\n\t\tamount?: string;\r\n\t\tcategory?: string;\r\n\t\ttime?: string;\r\n\t\tcomment?: string;\r\n\t};\r\n\r\n\tcategories: string[];\r\n\r\n}\r\n\r\nexport function TransactionFormView(props: TransactionFormViewProps) {\r\n\r\n\tfunction handleSubmit(e: React.FormEvent) {\r\n\t\te.preventDefault()\r\n\t\tprops.onSubmit()\r\n\t}\r\n\r\n\treturn <form className=\"TransactionForm\" onSubmit={handleSubmit}>\r\n\r\n\t\t<Type variant=\"button\">\r\n\t\t\t{\"New transaction\"}\r\n\t\t</Type>\r\n\r\n\t\t<TextField\r\n\t\t\tvalue={props.amount}\r\n\t\t\tonChange={e => props.onAmountChange(e.target.value)}\r\n\t\t\tid=\"transaction-amount\"\r\n\t\t\tvariant=\"outlined\"\r\n\t\t\tname=\"amount\"\r\n\t\t\ttype=\"numeric\"\r\n\t\t\tlabel=\"Amount\"\r\n\t\t\terror={!!props.errors.amount}\r\n\t\t\thelperText={props.errors.amount}\r\n\t\t\tfullWidth\r\n\t\t\trequired\r\n\t\t\tsize=\"small\"\r\n\t\t\tInputProps={{\r\n\t\t\t\tendAdornment: <InputAdornment position=\"end\">\r\n\t\t\t\t\t<Type>\r\n\t\t\t\t\t\t{\"EUR\"}\r\n\t\t\t\t\t</Type>\r\n\t\t\t\t</InputAdornment>\r\n\t\t\t}}\r\n\t\t/>\r\n\r\n\t\t<Autocomplete\r\n\t\t\tvalue={props.category}\r\n\t\t\tonChange={(e, v) => props.onCategoryChange(v)}\r\n\t\t\tid=\"transaction-category\"\r\n\t\t\tfreeSolo\r\n\t\t\topenOnFocus\r\n\t\t\tautoHighlight\r\n\t\t\tselectOnFocus\r\n\t\t\tdisableClearable\r\n\t\t\tfullWidth\r\n\t\t\tsize=\"small\"\r\n\t\t\toptions={props.categories}\r\n\t\t\trenderInput={(params) => (\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tname=\"category\"\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tlabel=\"Category\"\r\n\t\t\t\t\terror={!!props.errors.category}\r\n\t\t\t\t\thelperText={props.errors.category}\r\n\t\t\t\t\trequired\r\n\t\t\t\t\t{...params}\r\n\t\t\t\t/>\r\n\t\t\t)}\r\n\t\t/>\r\n\r\n\t\t<KeyboardDatePicker\r\n\t\t\tvalue={props.time}\r\n\t\t\tonChange={d => props.onTimeChange(d as Date)}\r\n\t\t\tformat=\"dd/MM/yyyy\"\r\n\t\t\tid=\"transaction-time\"\r\n\t\t\tvariant=\"inline\"\r\n\t\t\tinputVariant=\"outlined\"\r\n\t\t\tlabel=\"Date\"\r\n\t\t\terror={!!props.errors.time}\r\n\t\t\thelperText={props.errors.time}\r\n\t\t\tfullWidth\r\n\t\t\trequired\r\n\t\t\tsize=\"small\"\r\n\t\t/>\r\n\r\n\t\t<TextField\r\n\t\t\tvalue={props.comment}\r\n\t\t\tonChange={e => props.onCommentChange(e.target.value)}\r\n\t\t\tid=\"transaction-comment\"\r\n\t\t\tvariant=\"outlined\"\r\n\t\t\tname=\"comment\"\r\n\t\t\ttype=\"text\"\r\n\t\t\tlabel=\"Comment\"\r\n\t\t\terror={!!props.errors.comment}\r\n\t\t\thelperText={props.errors.comment}\r\n\t\t\tfullWidth\r\n\t\t\tsize=\"small\"\r\n\t\t/>\r\n\r\n\t\t<Button\r\n\t\t\ttype=\"submit\"\r\n\t\t\tcolor=\"primary\"\r\n\t\t\tvariant=\"contained\"\r\n\t\t\tsize=\"small\"\r\n\t\t>\r\n\t\t\t{\"Create\"}\r\n\t\t</Button>\r\n\r\n\t</form>\r\n}","import React, { useState } from \"react\"\r\nimport { TransactionFormView } from \"./TransactionFormView\"\r\nimport { useStoreActions, useStoreState } from \"../../store\"\r\n\r\nexport type TransactionFormProps = {\r\n\r\n}\r\n\r\nexport function TransactionForm(props: TransactionFormProps) {\r\n\r\n\tconst categories = useStoreState(_ => _.transactions.categories)\r\n\r\n\tconst postTransaction = useStoreActions(_ => _.transactions.postTransaction)\r\n\r\n\t/**\r\n\t * Input state\r\n\t */\r\n\tconst [amount, setAmount] = useState<string>(\"\")\r\n\tconst [category, setCategory] = useState<string>(\"\")\r\n\tconst [time, setTime] = useState<Date>(new Date())\r\n\tconst [comment, setComment] = useState<string>(\"\")\r\n\r\n\t/**\r\n\t * Error state\r\n\t */\r\n\tconst [error, setError] = useState<string>()\r\n\tconst [amountError, setAmountError] = useState<string>()\r\n\tconst [categoryError, setCategoryError] = useState<string>()\r\n\tconst [timeError, setTimeError] = useState<string>()\r\n\tconst [commentError, setCommentError] = useState<string>()\r\n\r\n\t/**\r\n\t * Validators\r\n\t */\r\n\tfunction validateAmount(): string | undefined {\r\n\t\t/* eslint-disable-next-line no-useless-escape */\r\n\t\tconst valid = /^-?\\d*[\\.,]?\\d{0,2}$/.test(amount.trim())\r\n\t\tif (!valid) return \"Invalid number\"\r\n\t\treturn undefined\r\n\t}\r\n\r\n\tfunction validateCategory(): string | undefined {\r\n\t\tconst valid = /[A-Za-z\\d\\-_\\s]+/.test(category.trim())\r\n\t\tconst empty = category.trim() === \"\"\r\n\t\tif (!valid) return \"Invalid category, do not use any special characters\"\r\n\t\tif (empty) return \"Please enter a cetegory\"\r\n\t\treturn undefined\r\n\t}\r\n\r\n\tfunction validateTime(): string | undefined {\r\n\t\tconst valid = time.getTime() > 0 && !isNaN(time.getTime())\r\n\t\tif (!valid) return \"Invalid date\"\r\n\t\treturn undefined\r\n\t}\r\n\r\n\tfunction validateComment(): string | undefined {\r\n\t\treturn undefined\r\n\t}\r\n\r\n\t/**\r\n\t * Full validation\r\n\t */\r\n\tfunction validateForm(): boolean {\r\n\t\tconst amountValidationError = validateAmount()\r\n\t\tconst categoryValidationError = validateCategory()\r\n\t\tconst timeValidationError = validateTime()\r\n\t\tconst commentValidationError = validateComment()\r\n\r\n\t\tsetAmountError(amountValidationError)\r\n\t\tsetCategoryError(categoryValidationError)\r\n\t\tsetTimeError(timeValidationError)\r\n\t\tsetCommentError(commentValidationError)\r\n\r\n\t\tif (\r\n\t\t\t!amountValidationError &&\r\n\t\t\t!categoryValidationError &&\r\n\t\t\t!timeValidationError &&\r\n\t\t\t!commentValidationError\r\n\t\t) {\r\n\t\t\treturn true\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\t/**\r\n\t * Handle form submission\r\n\t */\r\n\tasync function handleSubmit() {\r\n\t\tconst formValid = validateForm()\r\n\t\tif (formValid) {\r\n\t\t\tconst result = await postTransaction({\r\n\t\t\t\tintegerAmount: Math.trunc(Number(amount.trim().replace(/,/g, '.')) * 100),\r\n\t\t\t\tcategory: category.trim(),\r\n\t\t\t\ttime: time.getTime(),\r\n\t\t\t\tcomment: comment.trim(),\r\n\t\t\t})\r\n\t\t\tresult.onSuccess(() => {\r\n\t\t\t\tsetAmount(\"\")\r\n\t\t\t\tsetCategory(\"\")\r\n\t\t\t\tsetTime(new Date())\r\n\t\t\t\tsetComment(\"\")\r\n\t\t\t})\r\n\t\t\tresult.onFailure((failure: any) => {\r\n\t\t\t\tswitch (failure.code) {\r\n\t\t\t\t\tcase \"data/invalid-request-data\":\r\n\t\t\t\t\t\tif (failure.data?.errors?.integerAmount) {\r\n\t\t\t\t\t\t\tsetAmountError(String(failure.data.errors.integerAmount))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (failure.data?.errors?.category) {\r\n\t\t\t\t\t\t\tsetCategoryError(String(failure.data.errors.category))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (failure.data?.errors?.comment) {\r\n\t\t\t\t\t\t\tsetCommentError(String(failure.data.errors.comment))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (failure.data?.errors?.time) {\r\n\t\t\t\t\t\t\tsetTimeError(String(failure.data.errors.time))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (failure.data?.errors?._root) {\r\n\t\t\t\t\t\t\tsetError(failure.data.errors._root)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (failure.data?.errors?.id) {\r\n\t\t\t\t\t\t\tsetError(failure.data.errors.id)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (failure.data?.errors?.uid) {\r\n\t\t\t\t\t\t\tsetError(failure.data.errors.uid)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"transaction/already-exists\":\r\n\t\t\t\t\t\tsetError(\"Could not post transaction due to overlapping IDs\")\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"server/unavailable\":\r\n\t\t\t\t\t\tsetError(\"Could not react server. Try again later.\")\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tconsole.warn(\"Uncaught failure\", failure)\r\n\t\t\t\t\t\tsetError(\"Error posting transaction.\")\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn <TransactionFormView\r\n\t\tonSubmit={handleSubmit}\r\n\t\tamount={amount}\r\n\t\tcategory={category}\r\n\t\ttime={time}\r\n\t\tcomment={comment}\r\n\t\tonAmountChange={value => setAmount(value)}\r\n\t\tonCategoryChange={value => setCategory(value)}\r\n\t\tonTimeChange={value => setTime(value)}\r\n\t\tonCommentChange={value => setComment(value)}\r\n\t\terrors={{\r\n\t\t\tmain: error,\r\n\t\t\tamount: amountError,\r\n\t\t\tcategory: categoryError,\r\n\t\t\ttime: timeError,\r\n\t\t\tcomment: commentError,\r\n\t\t}}\r\n\t\tcategories={categories}\r\n\t/>\r\n}","import \"./Sidebar.scss\";\r\nimport React from \"react\"\r\nimport { Auth } from \"../../classes/Auth\";\r\nimport { IconButton, Button, Drawer } from \"@material-ui/core\";\r\nimport {\r\n\tHome as DashboardIcon,\r\n\tBarChart2 as AnalyticsIcon,\r\n\tUser as UserIcon,\r\n\tSettings as SettingsIcon,\r\n\tBriefcase as BudgetIcon,\r\n\tLogOut as LogoutIcon,\r\n\tPlus as PlusIcon\r\n} from \"react-feather\"\r\nimport cx from \"classnames\"\r\nimport { TransactionForm } from \"../../components/TransactionForm/TransactionFormController\";\r\nimport { useSmMedia } from \"../../hooks/useMedia\";\r\nimport { Type } from \"../../components/Type/Type\";\r\n\r\nexport type SidebarViewProps = {\r\n\tisDashboard: boolean;\r\n\tonDashboard(): void;\r\n\r\n\tisAnalytics: boolean;\r\n\tonAnalytics(): void;\r\n\r\n\tisBudget: boolean;\r\n\tonBudget(): void;\r\n\r\n\tisSettings: boolean;\r\n\tonSettings(): void;\r\n\r\n\tuser: Auth;\r\n\tlogout(): void;\r\n\r\n\ttransactionFormOpen: boolean;\r\n\tonTransactionFormOpen(): void;\r\n\tonTransactionFormClose(): void;\r\n}\r\n\r\nexport function SidebarView(props: SidebarViewProps) {\r\n\r\n\tconst sidebarView = useSmMedia()\r\n\r\n\treturn <>\r\n\r\n\t\t<Drawer\r\n\t\t\topen={props.transactionFormOpen}\r\n\t\t\tonClose={props.onTransactionFormClose}\r\n\t\t\tanchor={sidebarView ? \"left\" : \"bottom\"}\r\n\t\t>\r\n\t\t\t<TransactionForm />\r\n\t\t</Drawer>\r\n\r\n\t\t<div className=\"Sidebar\">\r\n\r\n\t\t\t{\r\n\r\n\t\t\t\tsidebarView\r\n\r\n\t\t\t\t\t? <div className=\"sidebar\">\r\n\r\n\t\t\t\t\t\t<div className=\"header\">\r\n\r\n\t\t\t\t\t\t\t<div className=\"top-row\">\r\n\r\n\t\t\t\t\t\t\t\t<Type variant=\"h4\" component=\"h6\">\r\n\t\t\t\t\t\t\t\t\t{\"Expence\"}\r\n\t\t\t\t\t\t\t\t</Type>\r\n\r\n\t\t\t\t\t\t\t\t<IconButton onClick={props.logout}>\r\n\t\t\t\t\t\t\t\t\t<LogoutIcon />\r\n\t\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"bottom-row\">\r\n\r\n\t\t\t\t\t\t\t\t<UserIcon />\r\n\r\n\t\t\t\t\t\t\t\t<Type>\r\n\t\t\t\t\t\t\t\t\t{props.user.displayName}\r\n\t\t\t\t\t\t\t\t</Type>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"body\">\r\n\r\n\t\t\t\t\t\t\t<div className=\"tabContainer\">\r\n\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"tab\", { active: props.isDashboard })}\r\n\t\t\t\t\t\t\t\t\tonClick={props.onDashboard}\r\n\t\t\t\t\t\t\t\t\tstartIcon={<DashboardIcon />}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{\"Dashboard\"}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"tabContainer\">\r\n\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"tab\", { active: props.isAnalytics })}\r\n\t\t\t\t\t\t\t\t\tonClick={props.onAnalytics}\r\n\t\t\t\t\t\t\t\t\tstartIcon={<AnalyticsIcon />}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{\"Analytics\"}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"tabContainer\">\r\n\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"tab\", { active: props.isBudget })}\r\n\t\t\t\t\t\t\t\t\tonClick={props.onBudget}\r\n\t\t\t\t\t\t\t\t\tstartIcon={<BudgetIcon />}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{\"Budget\"}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"tabContainer\">\r\n\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"tab\", { active: props.isSettings })}\r\n\t\t\t\t\t\t\t\t\tonClick={props.onSettings}\r\n\t\t\t\t\t\t\t\t\tstartIcon={<SettingsIcon />}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{\"Settings\"}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div className=\"tabContainer addButton\">\r\n\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\t\t\tclassName={cx(\"tab\")}\r\n\t\t\t\t\t\t\t\t\tonClick={props.onTransactionFormOpen}\r\n\t\t\t\t\t\t\t\t\tstartIcon={<PlusIcon />}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{\"New transaction\"}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t: <div className=\"tabs\">\r\n\r\n\t\t\t\t\t\t<div className=\"tabContainer\">\r\n\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tclassName={cx(\"tab\", { active: props.isDashboard })}\r\n\t\t\t\t\t\t\t\tonClick={props.onDashboard}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<DashboardIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"tabContainer\">\r\n\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tclassName={cx(\"tab\", { active: props.isAnalytics })}\r\n\t\t\t\t\t\t\t\tonClick={props.onAnalytics}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<AnalyticsIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"tabContainer\">\r\n\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tclassName={cx(\"tab\")}\r\n\t\t\t\t\t\t\t\tonClick={props.onTransactionFormOpen}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PlusIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t\t<div className=\"tabContainer\">\r\n\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tclassName={cx(\"tab\", { active: props.isBudget })}\r\n\t\t\t\t\t\t\t\tonClick={props.onBudget}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<BudgetIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"tabContainer\">\r\n\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tclassName={cx(\"tab\", { active: props.isSettings })}\r\n\t\t\t\t\t\t\t\tonClick={props.onSettings}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<SettingsIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t}\r\n\r\n\t\t</div>\r\n\r\n\t</>\r\n}","import React, { useState } from \"react\"\r\nimport { SidebarView } from \"./SidebarView\"\r\nimport { useRouteMatch } from \"react-router-dom\"\r\nimport { routes } from \"../../Routes\"\r\nimport { useRedirect } from \"../../hooks/useRedirect\"\r\nimport { useStoreState, useStoreActions } from \"../../store\"\r\n\r\nexport type SidebarProps = {\r\n\r\n}\r\n\r\nexport function Sidebar(props: SidebarProps) {\r\n\r\n\tconst dashboardMatch = useRouteMatch(routes.dashboard)\r\n\tconst analyticsMatch = useRouteMatch(routes.analytics)\r\n\tconst budgetMatch = useRouteMatch(routes.budget)\r\n\tconst settingsMatch = useRouteMatch(routes.settings)\r\n\r\n\tconst user = useStoreState(_ => _.auth.user)\r\n\r\n\tconst logout = useStoreActions(_ => _.auth.logout)\r\n\r\n\tconst redirect = useRedirect()\r\n\r\n\tconst [transactionFormOpen, setTransactionFormOpen] = useState(false)\r\n\r\n\tif (!user) return null\r\n\r\n\treturn <SidebarView\r\n\r\n\t\tisDashboard={!!dashboardMatch}\r\n\t\tonDashboard={() => redirect(routes.dashboard)}\r\n\r\n\t\tisAnalytics={!!analyticsMatch}\r\n\t\tonAnalytics={() => redirect(routes.analytics)}\r\n\r\n\t\tisBudget={!!budgetMatch}\r\n\t\tonBudget={() => redirect(routes.budget)}\r\n\r\n\t\tisSettings={!!settingsMatch}\r\n\t\tonSettings={() => redirect(routes.settings)}\r\n\r\n\t\tuser={user}\r\n\t\tlogout={() => logout()}\r\n\r\n\t\ttransactionFormOpen={transactionFormOpen}\r\n\t\tonTransactionFormOpen={() => setTransactionFormOpen(true)}\r\n\t\tonTransactionFormClose={() => setTransactionFormOpen(false)}\r\n\r\n\t/>\r\n}","import \"./AppFrame.scss\";\r\nimport React from \"react\"\r\nimport { Sidebar } from \"../Sidebar/SidebarController\";\r\n\r\nexport type AppFrameViewProps = {\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\nexport function AppFrameView(props: AppFrameViewProps) {\r\n\treturn <div className=\"AppFrame\">\r\n\t\t<div className=\"sidebar\">\r\n\t\t\t<Sidebar />\r\n\t\t</div>\r\n\t\t<div className=\"content\">\r\n\t\t\t{props.children}\r\n\t\t</div>\r\n\t</div>\r\n}","import React from \"react\"\r\nimport { AppFrameView } from \"./AppFrameView\"\r\n\r\nexport type AppFrameProps = {\r\n\tchildren: React.ReactNode;\r\n}\r\n\r\nexport function AppFrame(props: AppFrameProps) {\r\n\treturn <AppFrameView children={props.children} />\r\n}","import \"./ChangePassword.scss\";\r\nimport React, { useState } from \"react\"\r\nimport { AuthFrame } from \"../../components/AuthFrame/AuthFrame\";\r\nimport { ChangePasswordFormType, changePasswordValidationSchema } from \"./ChangePasswordController\";\r\nimport { Type } from \"../../components/Type/Type\";\r\nimport { yupResolver } from \"@hookform/resolvers\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { TextField, InputAdornment, IconButton, Button, CircularProgress } from \"@material-ui/core\";\r\nimport {\r\n\tVisibility as PasswordVisibleIcon,\r\n\tVisibilityOff as PasswordInvisibleIcon,\r\n} from \"@material-ui/icons\";\r\n\r\nexport type ChangePasswordViewProps = {\r\n\r\n\tvalidTokenEmail: string | undefined | null;\r\n\r\n\tloading: boolean;\r\n\r\n\tpasswordChangeSuccessful: boolean;\r\n\r\n\terror?: string;\r\n\r\n\tonSubmit(values: ChangePasswordFormType): void;\r\n\r\n\tonLogin(): void;\r\n\r\n}\r\n\r\nexport function ChangePasswordView(props: ChangePasswordViewProps) {\r\n\r\n\t/**\r\n\t * Password visible state\r\n\t */\r\n\tconst [passwordVisible, setPasswordVisible] = useState(false)\r\n\r\n\t/**\r\n\t * React hook form\r\n\t */\r\n\tconst form = useForm<ChangePasswordFormType>({\r\n\t\tresolver: yupResolver(changePasswordValidationSchema),\r\n\t})\r\n\r\n\t/**\r\n\t * Email and password error shorthands for react hook form\r\n\t */\r\n\tconst passwordError = form.formState.touched.password && form.errors.password?.message\r\n\r\n\treturn <div className=\"ChangePassword\">\r\n\r\n\t\t<AuthFrame\r\n\r\n\t\t\theader=\"Change password\"\r\n\r\n\t\t\tbody={(() => {\r\n\r\n\t\t\t\tif (props.loading) {\r\n\r\n\t\t\t\t\treturn <CircularProgress />\r\n\r\n\t\t\t\t} else if (!props.validTokenEmail) {\r\n\r\n\t\t\t\t\treturn <>\r\n\r\n\t\t\t\t\t\t<Type color=\"error\">\r\n\t\t\t\t\t\t\t{\"Invalid password change link\"}\r\n\t\t\t\t\t\t</Type>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={props.onLogin}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\"Back to login\"}\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t</>\r\n\r\n\t\t\t\t} else if (props.passwordChangeSuccessful) {\r\n\r\n\t\t\t\t\treturn <>\r\n\r\n\t\t\t\t\t\t<Type>\r\n\t\t\t\t\t\t\t{\"Password changed for \" + props.validTokenEmail}\r\n\t\t\t\t\t\t</Type>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={props.onLogin}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\"Login\"}\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t</>\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn <form onSubmit={form.handleSubmit(props.onSubmit)}>\r\n\r\n\t\t\t\t\t\t<Type>\r\n\t\t\t\t\t\t\t{\"Enter a new password for \" + props.validTokenEmail}\r\n\t\t\t\t\t\t</Type>\r\n\r\n\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\tid=\"change-password\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\ttype={passwordVisible ? \"text\" : \"password\"}\r\n\t\t\t\t\t\t\tinputRef={form.register}\r\n\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\terror={!!passwordError}\r\n\t\t\t\t\t\t\thelperText={passwordError}\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\t\t\tendAdornment: <InputAdornment position=\"end\">\r\n\t\t\t\t\t\t\t\t\t<IconButton onClick={() => setPasswordVisible(_ => !_)} size=\"small\">\r\n\t\t\t\t\t\t\t\t\t\t{passwordVisible ? <PasswordVisibleIcon /> : <PasswordInvisibleIcon />}\r\n\t\t\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t\t</InputAdornment>,\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\"Change password\"}\r\n\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tprops.error ?\r\n\t\t\t\t\t\t\t\t<Type color=\"error\">\r\n\t\t\t\t\t\t\t\t\t{props.error}\r\n\t\t\t\t\t\t\t\t</Type>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t</form>\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t})()}\r\n\r\n\t\t/>\r\n\r\n\t</div>\r\n}","import React, { useEffect, useState } from \"react\"\r\nimport { ChangePasswordView } from \"./ChangePasswordView\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport { useRedirect } from \"../../hooks/useRedirect\"\r\nimport * as yup from \"yup\"\r\nimport { useStoreActions } from \"../../store\"\r\n\r\nexport const changePasswordValidationSchema = yup.object({\r\n\tpassword: yup.string().defined().min(6).max(255),\r\n}).defined()\r\n\r\nexport type ChangePasswordFormType = yup.InferType<typeof changePasswordValidationSchema>\r\n\r\nexport type ChangePasswordProps = {\r\n\r\n}\r\n\r\nexport function ChangePassword(props: ChangePasswordProps) {\r\n\r\n\tconst { token } = useParams<{ token?: string }>()\r\n\r\n\tconst redirect = useRedirect()\r\n\r\n\tconst validateChangePasswordToken = useStoreActions(_ => _.auth.validateChangePasswordToken)\r\n\tconst changePassword = useStoreActions(_ => _.auth.changePassword)\r\n\r\n\t/**\r\n\t * Result from server whether the token is valid: for a valid\r\n\t * token the server will return the user's email, which is stored\r\n\t * here as a string to signal a valid token.\r\n\t * \r\n\t * We use null to signal an invalid token, when the server responds\r\n\t * with an error and undefined to signal a loading state.\r\n\t */\r\n\tconst [validTokenEmail, setValidTokenEmail] = useState<string | null | undefined>()\r\n\r\n\tconst [passwordChangeSuccessful, setPasswordChangeSuccessful] = useState(false)\r\n\r\n\tconst [error, setError] = useState<string>()\r\n\r\n\t/**\r\n\t * Initially loading the token validity state from the server\r\n\t */\r\n\tuseEffect(() => {\r\n\t\tif (token) {\r\n\t\t\tvalidateChangePasswordToken({ token }).then(result => {\r\n\t\t\t\tresult.onSuccess((value) => {\r\n\t\t\t\t\tsetValidTokenEmail(value)\r\n\t\t\t\t})\r\n\t\t\t\tresult.onFailure(() => {\r\n\t\t\t\t\tsetValidTokenEmail(null)\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}, []) // eslint-disable-line\r\n\r\n\t/**\r\n\t * If no token is present, automatically redirect the user\r\n\t */\r\n\tif (!token) {\r\n\t\tredirect(_ => _.login)\r\n\t\treturn null\r\n\t}\r\n\r\n\t/**\r\n\t * Handle submitting\r\n\t */\r\n\tfunction handleSubmit(values: ChangePasswordFormType) {\r\n\t\tif (token) {\r\n\t\t\tchangePassword({ ...values, token }).then(result => {\r\n\t\t\t\tresult.onSuccess(() => {\r\n\t\t\t\t\tsetPasswordChangeSuccessful(true)\r\n\t\t\t\t})\r\n\t\t\t\tresult.onFailure(() => {\r\n\t\t\t\t\tsetError(\"Could not change password\")\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn <ChangePasswordView\r\n\r\n\t\tvalidTokenEmail={validTokenEmail}\r\n\r\n\t\tloading={validTokenEmail === undefined}\r\n\r\n\t\tpasswordChangeSuccessful={passwordChangeSuccessful}\r\n\r\n\t\tonSubmit={handleSubmit}\r\n\r\n\t\tonLogin={() => redirect(_ => _.login)}\r\n\r\n\t\terror={error}\r\n\r\n\t/>\r\n}","import \"./ConfirmEmail.scss\";\r\nimport React from \"react\"\r\nimport { AuthFrame } from \"../../components/AuthFrame/AuthFrame\";\r\nimport { Type } from \"../../components/Type/Type\";\r\nimport { Button, CircularProgress } from \"@material-ui/core\";\r\n\r\nexport type ConfirmEmailViewProps = {\r\n\tsuccess: undefined | boolean;\r\n\tonLogin(): void;\r\n}\r\n\r\nexport function ConfirmEmailView(props: ConfirmEmailViewProps) {\r\n\r\n\treturn <div className=\"ConfirmEmail\">\r\n\r\n\t\t<AuthFrame\r\n\r\n\t\t\theader=\"Change password\"\r\n\r\n\t\t\tbody={(() => {\r\n\r\n\t\t\t\tswitch (props.success) {\r\n\r\n\t\t\t\t\tcase undefined:\r\n\r\n\t\t\t\t\t\treturn <CircularProgress />\r\n\r\n\t\t\t\t\tcase false:\r\n\r\n\t\t\t\t\t\treturn <>\r\n\r\n\t\t\t\t\t\t\t<Type color=\"error\">\r\n\t\t\t\t\t\t\t\t{\"Invalid password change link\"}\r\n\t\t\t\t\t\t\t</Type>\r\n\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={props.onLogin}\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{\"Back to login\"}\r\n\t\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t</>\r\n\r\n\t\t\t\t\tcase true:\r\n\r\n\t\t\t\t\t\treturn <>\r\n\r\n\t\t\t\t\t\t\t<Type>\r\n\t\t\t\t\t\t\t\t{\"Email succesfully confirmed\"}\r\n\t\t\t\t\t\t\t</Type>\r\n\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\t\tonClick={props.onLogin}\r\n\t\t\t\t\t\t\t\tfullWidth\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{\"Login\"}\r\n\t\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t</>\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t})()}\r\n\r\n\t\t/>\r\n\r\n\t</div>\r\n}","import React, { useEffect, useState } from \"react\"\r\nimport { ConfirmEmailView } from \"./ConfirmEmailView\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport { useRedirect } from \"../../hooks/useRedirect\"\r\nimport { useStoreActions } from \"../../store\"\r\n\r\nexport type ConfirmEmailProps = {\r\n\r\n}\r\n\r\nexport function ConfirmEmail(props: ConfirmEmailProps) {\r\n\r\n\tconst { token } = useParams<{ token?: string }>()\r\n\r\n\tconst redirect = useRedirect()\r\n\r\n\tconst confirmEmail = useStoreActions(_ => _.auth.confirmEmail)\r\n\r\n\t/**\r\n\t * Boolean for whether confirmation was successful or not: undefined\r\n\t * signals a loading value\r\n\t */\r\n\tconst [success, setSuccess] = useState<boolean>()\r\n\r\n\t/**\r\n\t * Initially loading the token validity state from the server\r\n\t */\r\n\tuseEffect(() => {\r\n\t\tif (token) {\r\n\t\t\tconfirmEmail({ token }).then(result => {\r\n\t\t\t\tsetSuccess(result.isSuccess())\r\n\t\t\t})\r\n\t\t}\r\n\t}, []) // eslint-disable-line\r\n\r\n\t/**\r\n\t * If no token is present, automatically redirect the user\r\n\t */\r\n\tif (!token) {\r\n\t\tredirect(_ => _.login)\r\n\t\treturn null\r\n\t}\r\n\r\n\treturn <ConfirmEmailView\r\n\r\n\t\tsuccess={success}\r\n\r\n\t\tonLogin={() => redirect(_ => _.login)}\r\n\r\n\t/>\r\n}","import React from \"react\"\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport { Login } from './views/Login/LoginController';\r\nimport { Register } from './views/Register/RegisterController';\r\nimport ProtectedRoute from './components/ProtectedRoute/ProtectedRoute';\r\nimport { Dashboard } from './views/Dashboard/DashboardController';\r\nimport { Settings } from \"./views/Settings/SettingsController\";\r\nimport { Analytics } from \"./views/Analytics/AnalyticsController\";\r\nimport { ForgotPassword } from \"./views/ForgotPassword/ForgotPasswordController\";\r\nimport { AppFrame } from \"./views/AppFrame/AppFrameController\";\r\nimport { ChangePassword } from \"./views/ChangePassword/ChangePasswordController\";\r\nimport { ConfirmEmail } from \"./views/ConfirmEmail/ConfirmEmailController\";\r\n\r\nexport const routes = {\r\n\tapproot: \"/app\",\r\n\tdashboard: \"/app/dashboard\",\r\n\tanalytics: \"/app/analytics\",\r\n\tbudget: \"/app/budget\",\r\n\tsettings: \"/app/settings\",\r\n\tlogin: \"/\",\r\n\tforgotPassword: \"/forgotPassword\",\r\n\tregister: \"/register\",\r\n\tchangePassword(token: string) {\r\n\t\treturn `/changePassword/${token}`\r\n\t},\r\n\tconfirmEmail(token: string) {\r\n\t\treturn `/confirmEmail/${token}`\r\n\t}\r\n} as const;\r\n\r\nexport function Routes() {\r\n\r\n\treturn <Switch>\r\n\r\n\t\t<Route exact path={routes.login}>\r\n\t\t\t<Login />\r\n\t\t</Route>\r\n\r\n\t\t<Route exact path={routes.register}>\r\n\t\t\t<Register />\r\n\t\t</Route>\r\n\r\n\t\t<Route exact path={routes.forgotPassword}>\r\n\t\t\t<ForgotPassword />\r\n\t\t</Route>\r\n\r\n\t\t<Route exact path={routes.changePassword(\":token\")}>\r\n\t\t\t<ChangePassword />\r\n\t\t</Route>\r\n\r\n\t\t<Route exact path={routes.confirmEmail(\":token\")}>\r\n\t\t\t<ConfirmEmail />\r\n\t\t</Route>\r\n\r\n\t\t<ProtectedRoute exact path={routes.dashboard}>\r\n\t\t\t<AppFrame>\r\n\t\t\t\t<Dashboard />\r\n\t\t\t</AppFrame>\r\n\t\t</ProtectedRoute>\r\n\r\n\t\t<ProtectedRoute exact path={routes.analytics}>\r\n\t\t\t<AppFrame>\r\n\t\t\t\t<Analytics />\r\n\t\t\t</AppFrame>\r\n\t\t</ProtectedRoute>\r\n\r\n\t\t<ProtectedRoute exact path={routes.budget}>\r\n\t\t\t<AppFrame>\r\n\t\t\t\t<p>Budget placeholder</p>\r\n\t\t\t</AppFrame>\r\n\t\t</ProtectedRoute>\r\n\r\n\t\t<ProtectedRoute exact path={routes.settings}>\r\n\t\t\t<AppFrame>\r\n\t\t\t\t<Settings />\r\n\t\t\t</AppFrame>\r\n\t\t</ProtectedRoute>\r\n\r\n\t\t<Route exact path=\"/v\">\r\n\t\t\tVersion number 0.0.1\r\n\t\t</Route>\r\n\r\n\t\t<Route path=\"/\">\r\n\t\t\t<Redirect to={routes.dashboard} />\r\n\t\t</Route>\r\n\t</Switch>\r\n\r\n}","import React, { useEffect } from 'react';\r\nimport { Routes } from './Routes';\r\nimport { useStoreActions } from './store';\r\n\r\nfunction App() {\r\n\r\n\t/**\r\n\t * Initialize by fetching the user's profile if any\r\n\t */\r\n\tconst getProfile = useStoreActions(_ => _.auth.getProfile)\r\n\r\n\tuseEffect(() => {\r\n\t\tgetProfile()\r\n\t}, [getProfile])\r\n\r\n\treturn <Routes />\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { createMuiTheme, colors } from \"@material-ui/core\";\r\n\r\n// Access any CSS var in :root by name\r\nfunction cssvar(\r\n  name: string,\r\n  options?: {\r\n    color?: boolean;\r\n  }\r\n) {\r\n  let value = getComputedStyle(document.documentElement).getPropertyValue(\r\n    \"--\" + name\r\n  );\r\n  if (options) {\r\n    if (options.color) {\r\n      if (process.env.NODE_ENV === \"development\") {\r\n        value = value.substring(1);\r\n      }\r\n    }\r\n  }\r\n  return value;\r\n}\r\n\r\nexport const theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      ...colors.deepPurple,\r\n      main: cssvar(\"color-primary-main\", { color: true }),\r\n      dark: cssvar(\"color-primary-dark\", { color: true }),\r\n      light: cssvar(\"color-primary-light\", { color: true }),\r\n      50: cssvar(\"color-primary-50\", { color: true }),\r\n      100: cssvar(\"color-primary-100\", { color: true }),\r\n      200: cssvar(\"color-primary-200\", { color: true }),\r\n      300: cssvar(\"color-primary-300\", { color: true }),\r\n      400: cssvar(\"color-primary-400\", { color: true }),\r\n      500: cssvar(\"color-primary-500\", { color: true }),\r\n      600: cssvar(\"color-primary-600\", { color: true }),\r\n      700: cssvar(\"color-primary-900\", { color: true }),\r\n      800: cssvar(\"color-primary-800\", { color: true }),\r\n      900: cssvar(\"color-primary-700\", { color: true }),\r\n      contrastText: \"#fff\",\r\n    },\r\n  },\r\n});\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  (window as any).theme = theme;\r\n}\r\n","import \"./styles/index.scss\"\r\nimport \"./styles/main.scss\"\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { store } from './store';\r\nimport { StoreProvider } from 'easy-peasy';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { ThemeProvider } from \"@material-ui/core\";\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport { theme } from \"./styles/theme\";\r\nimport DateFnsUtils from \"@date-io/date-fns\"\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<StoreProvider store={store}>\r\n\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t<MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n\t\t\t\t\t<BrowserRouter>\r\n\t\t\t\t\t\t<App />\r\n\t\t\t\t\t</BrowserRouter>\r\n\t\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t</ThemeProvider>\r\n\t\t</StoreProvider>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}